(()=>{(()=>{var Wr={477:()=>{"use strict"},787:()=>{"use strict"},608:()=>{"use strict";var k=(S,p,P)=>new Promise((T,A)=>{var F=b=>{try{E(P.next(b))}catch(G){A(G)}},X=b=>{try{E(P.throw(b))}catch(G){A(G)}},E=b=>b.done?T(b.value):Promise.resolve(b.value).then(F,X);E((P=P.apply(S,p)).next())});function O(S){return k(this,null,function*(){return new Promise(p=>setTimeout(p,S))})}var m=Object.defineProperty,M=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,L=(S,p,P)=>p in S?m(S,p,{enumerable:!0,configurable:!0,writable:!0,value:P}):S[p]=P,I=(S,p)=>{for(var P in p||(p={}))$.call(p,P)&&L(S,P,p[P]);if(M)for(var P of M(p))D.call(p,P)&&L(S,P,p[P]);return S},ae=(S,p,P)=>new Promise((T,A)=>{var F=b=>{try{E(P.next(b))}catch(G){A(G)}},X=b=>{try{E(P.throw(b))}catch(G){A(G)}},E=b=>b.done?T(b.value):Promise.resolve(b.value).then(F,X);E((P=P.apply(S,p)).next())});const re=class ut extends Phaser.Loader.File{constructor(p,P){const T=I({type:"image",cache:p.textureManager},P);super(p,T),this.src=T.src.trim(),this.props=P,this.cache=p.textureManager}static registerInPhaserLoader(){ut.isRegistered||(Phaser.Loader.FileTypesManager.register("svgInline",function(p){return this.addFile(new ut(this,p)),this}),ut.isRegistered=!0)}load(){this.state===Phaser.Loader.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=Phaser.Loader.FILE_LOADING,this.loader.nextFile(this,!0))}onLoad(){var p;(p=this.loader)==null||p.nextFile(this,!0)}onProcess(){return ae(this,null,function*(){this.state=Phaser.Loader.FILE_PROCESSING;try{this.onSvgProcess(this.src)}catch(p){this.onProcessError()}})}onSvgProcess(p){var P,T;this.state=Phaser.Loader.FILE_PROCESSING;let A=[p],{width:F,height:X,scale:E}=this.props;e:if(F&&X||E){let Z=null;Z=new DOMParser().parseFromString(p,"text/xml");let K=Z.getElementsByTagName("svg")[0],Oe=K.getAttribute("viewBox"),be=Oe!=null,Q=parseFloat((P=K.getAttribute("width"))!=null?P:"100"),te=parseFloat((T=K.getAttribute("height"))!=null?T:"100");if(!be&&Q&&te)K.setAttribute("viewBox","0  0 "+Q+" "+te);else if(be&&!Q&&!te){let xe=Oe.split(/\s+|,/);Q=+xe[2],te=+xe[3]}if(E)if(Q&&te)F=Q*E,X=te*E;else break e;F&&X&&(K.setAttribute("width",F.toString()+"px"),K.setAttribute("height",X.toString()+"px")),A=[new XMLSerializer().serializeToString(K)]}let b;try{b=new window.Blob(A,{type:"image/svg+xml;charset=utf-8"})}catch(Z){this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;let G=this,we=!1;const ke=p.indexOf("data:image")>-1;this.data.onload=()=>ae(this,null,function*(){ke&&(yield O(300)),we||Phaser.Loader.File.revokeObjectURL(this.data),this.onProcessComplete()}),this.data.onerror=function(){if(we)G.onProcessError();else{we=!0,Phaser.Loader.File.revokeObjectURL(G.data);const Z="data:image/svg+xml,"+encodeURIComponent(A.join("")),ue=new Image;ue.onload=()=>{G.data.src=Z},ue.src=Z}},Phaser.Loader.File.createObjectURL(this.data,b,"image/svg+xml")}addToCache(){this.cache.addImage(this.key,this.data),this.pendingDestroy()}};re.isRegistered=!1;let le=null;var q=Object.defineProperty,H=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,W=(S,p,P)=>p in S?q(S,p,{enumerable:!0,configurable:!0,writable:!0,value:P}):S[p]=P,ee=(S,p)=>{for(var P in p||(p={}))N.call(p,P)&&W(S,P,p[P]);if(H)for(var P of H(p))J.call(p,P)&&W(S,P,p[P]);return S};class pe{static buildXHR(p,P,T){var A,F,X;const E=ye(P,p.xhrSettings);E.async=(A=E.async)!=null?A:!0;const b=new XMLHttpRequest;if(b.open("GET",p.src,(F=E.async)!=null?F:!0,E.user,E.password),b.responseType=T,b.timeout=(X=E.timeout)!=null?X:1e5,E.headers)for(const G in E.headers)b.setRequestHeader(G,E.headers[G]);return E.header&&E.headerValue&&b.setRequestHeader(E.header,E.headerValue),E.requestedWith&&b.setRequestHeader("X-Requested-With",E.requestedWith),E.overrideMimeType&&b.overrideMimeType(E.overrideMimeType),E.withCredentials&&(b.withCredentials=!0),b.onload=p.onLoad.bind(p,b),b.onerror=p.onError.bind(p,b),b.onprogress=p.onProgress.bind(p),b}}function ye(S,p){const P=S===void 0?Phaser.Loader.XHRSettings():ee({},S);if(p)for(let T in p)p.hasOwnProperty(T)&&(P[T]=p[T]);return P}var he;(S=>{function p(F){return S.isContent(F,"image/svg+xml")}S.isSvg=p;function P(F){return S.isContent(F,"image/png")}S.isPng=P;function T(F){return S.isContent(F,"image/jpeg")}S.isJpeg=T;function A(F,X){return F==null?!1:F.indexOf(X)>-1}S.isContent=A})(he||(he={}));var Te=(S,p,P)=>new Promise((T,A)=>{var F=b=>{try{E(P.next(b))}catch(G){A(G)}},X=b=>{try{E(P.throw(b))}catch(G){A(G)}},E=b=>b.done?T(b.value):Promise.resolve(b.value).then(F,X);E((P=P.apply(S,p)).next())});class Le extends Phaser.Loader.FileTypes.SVGFile{load(){if(this.state===Phaser.Loader.FILE_POPULATED)this.loader.nextFile(this,!0);else{if(this.state=Phaser.Loader.FILE_LOADING,this.src=Phaser.Loader.GetURL(this,this.loader.baseURL),this.src.indexOf("data:")===0){console.warn("Local data URIs are not supported: "+this.key);return}this.xhrLoader=pe.buildXHR(this,this.loader.xhr,"text"),this.xhrLoader.send(),this.xhrLoader.onreadystatechange=()=>{const{xhrLoader:p}=this;if(p==null){console.warn("xhrLoader==null");return}const P=p.getResponseHeader("content-type");P!=null&&(he.isSvg(P)||(p.abort(),this.xhrLoader=pe.buildXHR(this,this.loader.xhr,"blob"),this.xhrLoader.send()))}}}onLoad(){var p;(p=this.loader)==null||p.nextFile(this,!0)}onProcess(){return Te(this,null,function*(){this.state=Phaser.Loader.FILE_PROCESSING;const{xhrLoader:p}=this;if(p==null){console.warn("xhrLoader==null");return}const P=p.getResponseHeader("Content-Type");if(P==null){this.onProcessComplete();return}const T=p.response;if(he.isSvg(P))try{this.onSvgProcess(T)}catch(A){console.warn(A),this.onProcessError()}else console.log("load non svg",this.src),this.onNonSvgProcess(T)})}onSvgProcess(p){var P,T;this.state=Phaser.Loader.FILE_PROCESSING;let A=[p],F=this.config.width,X=this.config.height,E=this.config.scale;e:if(F&&X||E){let Z=null;Z=new DOMParser().parseFromString(p,"text/xml");let K=Z.getElementsByTagName("svg")[0],Oe=K.getAttribute("viewBox"),be=Oe!=null,Q=parseFloat((P=K.getAttribute("width"))!=null?P:"100"),te=parseFloat((T=K.getAttribute("height"))!=null?T:"100");if(!be&&Q&&te)K.setAttribute("viewBox","0  0 "+Q+" "+te);else if(be&&!Q&&!te){let xe=Oe.split(/\s+|,/);Q=+xe[2],te=+xe[3]}if(E)if(Q&&te)F=Q*E,X=te*E;else break e;K.setAttribute("width",F.toString()+"px"),K.setAttribute("height",X.toString()+"px"),A=[new XMLSerializer().serializeToString(K)]}let b;try{b=new window.Blob(A,{type:"image/svg+xml;charset=utf-8"})}catch(Z){this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;let G=this,we=!1;const ke=p.indexOf("data:image")>-1;this.data.onload=()=>Te(this,null,function*(){ke&&(yield O(300)),we||Phaser.Loader.File.revokeObjectURL(this.data),this.onProcessComplete()}),this.data.onerror=function(){if(we)G.onProcessError();else{we=!0,Phaser.Loader.File.revokeObjectURL(G.data);const Z="data:image/svg+xml,"+encodeURIComponent(A.join("")),ue=new Image;ue.onload=()=>{G.data.src=Z},ue.src=Z}},Phaser.Loader.File.createObjectURL(this.data,b,"image/svg+xml")}onNonSvgProcess(p){this.state=Phaser.Loader.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=()=>{Phaser.Loader.File.revokeObjectURL(this.data),this.onProcessComplete()},this.data.onerror=()=>{Phaser.Loader.File.revokeObjectURL(this.data),this.onProcessError()},Phaser.Loader.File.createObjectURL(this.data,p,"image/png")}}function _(){Phaser.Loader.FileTypesManager.register("svg",function(S,p,P,T){if(Array.isArray(S))for(let A=0;A<S.length;A++)this.addFile(new SuperSvgImageFile(this,S[A]));else this.addFile(new SuperSvgImageFile(this,S,p,P,T));return this})}},667:()=>{"use strict";var k=($,D,L)=>new Promise((I,ae)=>{var re=H=>{try{q(L.next(H))}catch(N){ae(N)}},le=H=>{try{q(L.throw(H))}catch(N){ae(N)}},q=H=>H.done?I(H.value):Promise.resolve(H.value).then(re,le);q((L=L.apply($,D)).next())});const O=class Re extends Phaser.Loader.File{constructor(D,L){const I={type:Re.FILE_TYPE,key:`await_${Re.taskCounter++}`};super(D,I),this.task=L}load(){return k(this,null,function*(){try{yield this.task,this.onLoad()}catch(D){this.onError()}})}onLoad(D,L){var I;(I=this.loader)==null||I.nextFile(this,!0)}onError(D,L){var I;(I=this.loader)==null||I.nextFile(this,!1)}static add(D,L){D.load.addFile(new Re(D.load,L))}static registerInPhaserLoader(){Re.isRegistered||(Phaser.Loader.FileTypesManager.register(Re.FILE_TYPE,function(D){return this.addFile(new Re(this,D)),this}),Re.isRegistered=!0)}};O.FILE_TYPE="asyncTask",O.taskCounter=0,O.isRegistered=!1;let m=O;class M extends Phaser.Plugins.BasePlugin{constructor(D){super(D),D.registerFileType(m.FILE_TYPE,()=>{})}}M.NAME="PreloadTaskPlugin"},837:(k,O,m)=>{"use strict";var M=m(667),$=m(826);function D(I){return new Promise(ae=>{const{onProgress:re,isLogging:le}=I,{load:q}=I.scene,H=N=>{re&&re(N),le&&console.log("asyncPhaserLoad:: progressCallback",N),le&&N===1&&console.log("asyncPhaserLoad:: load resolve: queue",q.queue)};re&&q.on(Phaser.Loader.Events.PROGRESS,H),q.once(Phaser.Loader.Events.COMPLETE,()=>{re&&q.off(Phaser.Loader.Events.PROGRESS,H),ae()}),q.on(Phaser.Loader.Events.FILE_LOAD_ERROR,N=>{I.onError?I.onError(N):console.warn("PhaserLoader file load error: ",N)}),L(I),q.start()})}function L(I){var ae;const{scene:re,zoom:le,svg:q,images:H,fonts:N,sounds:J,sprites:W,promises:ee,jsons:pe}=I,{load:ye,textures:he,sound:Te,cache:Le}=re;H==null||H.filter(_=>_!=null&&!he.exists(_)).forEach(_=>ye.image(_,_)),q==null||q.filter(_=>_!=null&&!he.exists(_)).forEach(_=>ye.svg(_,_,{scale:le})),J==null||J.filter(_=>_!=null&&!Te.get(_)).forEach(_=>ye.audio(_,`${_}?ext=.mp3`)),pe==null||pe.filter(_=>_!=null&&!Le.json.get(_)).forEach(_=>_&&ye.json(_,_)),(ae=W==null?void 0:W.filter(({url:_})=>_!=null&&!he.exists(_)))==null||ae.forEach(({url:_,frameConfig:S})=>ye.spritesheet(_,_,S)),N&&PreloadTask.add(re,fontLoad(N)),ee&&PreloadTask.add(re,Promise.all(ee))}},546:(k,O,m)=>{"use strict";var M=m(837),$=m(312),D=m.n($);m.o($,"addCameraDraggingToObject")&&m.d(O,{addCameraDraggingToObject:function(){return $.addCameraDraggingToObject}}),m.o($,"copyDeep")&&m.d(O,{copyDeep:function(){return $.copyDeep}}),m.o($,"setLeftTop")&&m.d(O,{setLeftTop:function(){return $.setLeftTop}})},312:()=>{"use strict"},437:(k,O,m)=>{"use strict";var M=Object.defineProperty,$=Object.defineProperties,D=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,re=(J,W,ee)=>W in J?M(J,W,{enumerable:!0,configurable:!0,writable:!0,value:ee}):J[W]=ee,le=(J,W)=>{for(var ee in W||(W={}))I.call(W,ee)&&re(J,ee,W[ee]);if(L)for(var ee of L(W))ae.call(W,ee)&&re(J,ee,W[ee]);return J},q=(J,W)=>$(J,D(W));const H=m(371);function N(J){return new Promise(W=>{H.load(q(le({},J),{active:W}))})}},826:(k,O,m)=>{"use strict";var M=m(520),$=m.n(M);m.o(M,"addCameraDraggingToObject")&&m.d(O,{addCameraDraggingToObject:function(){return M.addCameraDraggingToObject}}),m.o(M,"copyDeep")&&m.d(O,{copyDeep:function(){return M.copyDeep}}),m.o(M,"setLeftTop")&&m.d(O,{setLeftTop:function(){return M.setLeftTop}});var D=m(437)},520:()=>{"use strict"},310:(k,O,m)=>{"use strict";var M=m(546);m.o(M,"addCameraDraggingToObject")&&m.d(O,{addCameraDraggingToObject:function(){return M.addCameraDraggingToObject}}),m.o(M,"copyDeep")&&m.d(O,{copyDeep:function(){return M.copyDeep}}),m.o(M,"setLeftTop")&&m.d(O,{setLeftTop:function(){return M.setLeftTop}});var $=m(608),D=m(661);m.o(D,"addCameraDraggingToObject")&&m.d(O,{addCameraDraggingToObject:function(){return D.addCameraDraggingToObject}}),m.o(D,"copyDeep")&&m.d(O,{copyDeep:function(){return D.copyDeep}}),m.o(D,"setLeftTop")&&m.d(O,{setLeftTop:function(){return D.setLeftTop}});var L=m(667),I=m(826);m.o(I,"addCameraDraggingToObject")&&m.d(O,{addCameraDraggingToObject:function(){return I.addCameraDraggingToObject}}),m.o(I,"copyDeep")&&m.d(O,{copyDeep:function(){return I.copyDeep}}),m.o(I,"setLeftTop")&&m.d(O,{setLeftTop:function(){return I.setLeftTop}})},661:(k,O,m)=>{"use strict";var M=m(353),$=m.n(M);m.o(M,"addCameraDraggingToObject")&&m.d(O,{addCameraDraggingToObject:function(){return M.addCameraDraggingToObject}}),m.o(M,"copyDeep")&&m.d(O,{copyDeep:function(){return M.copyDeep}}),m.o(M,"setLeftTop")&&m.d(O,{setLeftTop:function(){return M.setLeftTop}})},353:()=>{"use strict"},371:(k,O,m)=>{var M;(function(){function $(o,a,f){return o.call.apply(o.bind,arguments)}function D(o,a,f){if(!o)throw Error();if(2<arguments.length){var h=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,h),o.apply(a,g)}}return function(){return o.apply(a,arguments)}}function L(o,a,f){return L=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?$:D,L.apply(null,arguments)}var I=Date.now||function(){return+new Date};function ae(o,a){this.a=o,this.o=a||o,this.c=this.o.document}var re=!!window.FontFace;function le(o,a,f,h){if(a=o.c.createElement(a),f)for(var g in f)f.hasOwnProperty(g)&&(g=="style"?a.style.cssText=f[g]:a.setAttribute(g,f[g]));return h&&a.appendChild(o.c.createTextNode(h)),a}function q(o,a,f){o=o.c.getElementsByTagName(a)[0],o||(o=document.documentElement),o.insertBefore(f,o.lastChild)}function H(o){o.parentNode&&o.parentNode.removeChild(o)}function N(o,a,f){a=a||[],f=f||[];for(var h=o.className.split(/\s+/),g=0;g<a.length;g+=1){for(var v=!1,C=0;C<h.length;C+=1)if(a[g]===h[C]){v=!0;break}v||h.push(a[g])}for(a=[],g=0;g<h.length;g+=1){for(v=!1,C=0;C<f.length;C+=1)if(h[g]===f[C]){v=!0;break}v||a.push(h[g])}o.className=a.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function J(o,a){for(var f=o.className.split(/\s+/),h=0,g=f.length;h<g;h++)if(f[h]==a)return!0;return!1}function W(o){return o.o.location.hostname||o.a.location.hostname}function ee(o,a,f){function h(){R&&g&&v&&(R(C),R=null)}a=le(o,"link",{rel:"stylesheet",href:a,media:"all"});var g=!1,v=!0,C=null,R=f||null;re?(a.onload=function(){g=!0,h()},a.onerror=function(){g=!0,C=Error("Stylesheet failed to load"),h()}):setTimeout(function(){g=!0,h()},0),q(o,"head",a)}function pe(o,a,f,h){var g=o.c.getElementsByTagName("head")[0];if(g){var v=le(o,"script",{src:a}),C=!1;return v.onload=v.onreadystatechange=function(){C||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(C=!0,f&&f(null),v.onload=v.onreadystatechange=null,v.parentNode.tagName=="HEAD"&&g.removeChild(v))},g.appendChild(v),setTimeout(function(){C||(C=!0,f&&f(Error("Script load timeout")))},h||5e3),v}return null}function ye(){this.a=0,this.c=null}function he(o){return o.a++,function(){o.a--,Le(o)}}function Te(o,a){o.c=a,Le(o)}function Le(o){o.a==0&&o.c&&(o.c(),o.c=null)}function _(o){this.a=o||"-"}_.prototype.c=function(o){for(var a=[],f=0;f<arguments.length;f++)a.push(arguments[f].replace(/[\W_]+/g,"").toLowerCase());return a.join(this.a)};function S(o,a){this.c=o,this.f=4,this.a="n";var f=(a||"n4").match(/^([nio])([1-9])$/i);f&&(this.a=f[1],this.f=parseInt(f[2],10))}function p(o){return A(o)+" "+(o.f+"00")+" 300px "+P(o.c)}function P(o){var a=[];o=o.split(/,\s*/);for(var f=0;f<o.length;f++){var h=o[f].replace(/['"]/g,"");h.indexOf(" ")!=-1||/^\d/.test(h)?a.push("'"+h+"'"):a.push(h)}return a.join(",")}function T(o){return o.a+o.f}function A(o){var a="normal";return o.a==="o"?a="oblique":o.a==="i"&&(a="italic"),a}function F(o){var a=4,f="n",h=null;return o&&((h=o.match(/(normal|oblique|italic)/i))&&h[1]&&(f=h[1].substr(0,1).toLowerCase()),(h=o.match(/([1-9]00|normal|bold)/i))&&h[1]&&(/bold/i.test(h[1])?a=7:/[1-9]00/.test(h[1])&&(a=parseInt(h[1].substr(0,1),10)))),f+a}function X(o,a){this.c=o,this.f=o.o.document.documentElement,this.h=a,this.a=new _("-"),this.j=a.events!==!1,this.g=a.classes!==!1}function E(o){o.g&&N(o.f,[o.a.c("wf","loading")]),G(o,"loading")}function b(o){if(o.g){var a=J(o.f,o.a.c("wf","active")),f=[],h=[o.a.c("wf","loading")];a||f.push(o.a.c("wf","inactive")),N(o.f,f,h)}G(o,"inactive")}function G(o,a,f){o.j&&o.h[a]&&(f?o.h[a](f.c,T(f)):o.h[a]())}function we(){this.c={}}function ke(o,a,f){var h=[],g;for(g in a)if(a.hasOwnProperty(g)){var v=o.c[g];v&&h.push(v(a[g],f))}return h}function Z(o,a){this.c=o,this.f=a,this.a=le(this.c,"span",{"aria-hidden":"true"},this.f)}function ue(o){q(o.c,"body",o.a)}function K(o){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+P(o.c)+";"+("font-style:"+A(o)+";font-weight:"+(o.f+"00")+";")}function Oe(o,a,f,h,g,v){this.g=o,this.j=a,this.a=h,this.c=f,this.f=g||3e3,this.h=v||void 0}Oe.prototype.start=function(){var o=this.c.o.document,a=this,f=I(),h=new Promise(function(C,R){function j(){I()-f>=a.f?R():o.fonts.load(p(a.a),a.h).then(function(V){1<=V.length?C():setTimeout(j,25)},function(){R()})}j()}),g=null,v=new Promise(function(C,R){g=setTimeout(R,a.f)});Promise.race([v,h]).then(function(){g&&(clearTimeout(g),g=null),a.g(a.a)},function(){a.j(a.a)})};function be(o,a,f,h,g,v,C){this.v=o,this.B=a,this.c=f,this.a=h,this.s=C||"BESbswy",this.f={},this.w=g||3e3,this.u=v||null,this.m=this.j=this.h=this.g=null,this.g=new Z(this.c,this.s),this.h=new Z(this.c,this.s),this.j=new Z(this.c,this.s),this.m=new Z(this.c,this.s),o=new S(this.a.c+",serif",T(this.a)),o=K(o),this.g.a.style.cssText=o,o=new S(this.a.c+",sans-serif",T(this.a)),o=K(o),this.h.a.style.cssText=o,o=new S("serif",T(this.a)),o=K(o),this.j.a.style.cssText=o,o=new S("sans-serif",T(this.a)),o=K(o),this.m.a.style.cssText=o,ue(this.g),ue(this.h),ue(this.j),ue(this.m)}var Q={D:"serif",C:"sans-serif"},te=null;function xe(){if(te===null){var o=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);te=!!o&&(536>parseInt(o[1],10)||parseInt(o[1],10)===536&&11>=parseInt(o[2],10))}return te}be.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=I(),Xe(this)};function qe(o,a,f){for(var h in Q)if(Q.hasOwnProperty(h)&&a===o.f[Q[h]]&&f===o.f[Q[h]])return!0;return!1}function Xe(o){var a=o.g.a.offsetWidth,f=o.h.a.offsetWidth,h;(h=a===o.f.serif&&f===o.f["sans-serif"])||(h=xe()&&qe(o,a,f)),h?I()-o.A>=o.w?xe()&&qe(o,a,f)&&(o.u===null||o.u.hasOwnProperty(o.a.c))?Je(o,o.v):Je(o,o.B):jt(o):Je(o,o.v)}function jt(o){setTimeout(L(function(){Xe(this)},o),50)}function Je(o,a){setTimeout(L(function(){H(this.g.a),H(this.h.a),H(this.j.a),H(this.m.a),a(this.a)},o),0)}function Ne(o,a,f){this.c=o,this.a=a,this.f=0,this.m=this.j=!1,this.s=f}var Ge=null;Ne.prototype.g=function(o){var a=this.a;a.g&&N(a.f,[a.a.c("wf",o.c,T(o).toString(),"active")],[a.a.c("wf",o.c,T(o).toString(),"loading"),a.a.c("wf",o.c,T(o).toString(),"inactive")]),G(a,"fontactive",o),this.m=!0,Ze(this)},Ne.prototype.h=function(o){var a=this.a;if(a.g){var f=J(a.f,a.a.c("wf",o.c,T(o).toString(),"active")),h=[],g=[a.a.c("wf",o.c,T(o).toString(),"loading")];f||h.push(a.a.c("wf",o.c,T(o).toString(),"inactive")),N(a.f,h,g)}G(a,"fontinactive",o),Ze(this)};function Ze(o){--o.f==0&&o.j&&(o.m?(o=o.a,o.g&&N(o.f,[o.a.c("wf","active")],[o.a.c("wf","loading"),o.a.c("wf","inactive")]),G(o,"active")):b(o.a))}function Ye(o){this.j=o,this.a=new we,this.h=0,this.f=this.g=!0}Ye.prototype.load=function(o){this.c=new ae(this.j,o.context||this.j),this.g=o.events!==!1,this.f=o.classes!==!1,ft(this,new X(this.c,o),o)};function dt(o,a,f,h,g){var v=--o.h==0;(o.f||o.g)&&setTimeout(function(){var C=g||null,R=h||null||{};if(f.length===0&&v)b(a.a);else{a.f+=f.length,v&&(a.j=v);var j,V=[];for(j=0;j<f.length;j++){var Y=f[j],ie=R[Y.c],de=a.a,Me=Y;if(de.g&&N(de.f,[de.a.c("wf",Me.c,T(Me).toString(),"loading")]),G(de,"fontloading",Me),de=null,Ge===null)if(window.FontFace){var Me=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),ot=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);Ge=Me?42<parseInt(Me[1],10):!ot}else Ge=!1;Ge?de=new Oe(L(a.g,a),L(a.h,a),a.c,Y,a.s,ie):de=new be(L(a.g,a),L(a.h,a),a.c,Y,a.s,C,ie),V.push(de)}for(j=0;j<V.length;j++)V[j].start()}},0)}function ft(o,a,f){var g=[],h=f.timeout;E(a);var g=ke(o.a,f,o.c),v=new Ne(o.c,a,h);for(o.h=g.length,a=0,f=g.length;a<f;a++)g[a].load(function(C,R,j){dt(o,v,C,R,j)})}function Ue(o,a){this.c=o,this.a=a}Ue.prototype.load=function(o){function a(){if(v["__mti_fntLst"+h]){var C=v["__mti_fntLst"+h](),R=[],j;if(C)for(var V=0;V<C.length;V++){var Y=C[V].fontfamily;C[V].fontStyle!=null&&C[V].fontWeight!=null?(j=C[V].fontStyle+C[V].fontWeight,R.push(new S(Y,j))):R.push(new S(Y))}o(R)}else setTimeout(function(){a()},50)}var f=this,h=f.a.projectId,g=f.a.version;if(h){var v=f.c.o;pe(this.c,(f.a.api||"https://fast.fonts.net/jsapi")+"/"+h+".js"+(g?"?v="+g:""),function(C){C?o([]):(v["__MonotypeConfiguration__"+h]=function(){return f.a},a())}).id="__MonotypeAPIScript__"+h}else o([])};function Qe(o,a){this.c=o,this.a=a}Qe.prototype.load=function(o){var a,f,h=this.a.urls||[],g=this.a.families||[],v=this.a.testStrings||{},C=new ye;for(a=0,f=h.length;a<f;a++)ee(this.c,h[a],he(C));var R=[];for(a=0,f=g.length;a<f;a++)if(h=g[a].split(":"),h[1])for(var j=h[1].split(","),V=0;V<j.length;V+=1)R.push(new S(h[0],j[V]));else R.push(new S(h[0]));Te(C,function(){o(R,v)})};function pt(o,a){o?this.c=o:this.c=gt,this.a=[],this.f=[],this.g=a||""}var gt="https://fonts.googleapis.com/css";function mt(o,a){for(var f=a.length,h=0;h<f;h++){var g=a[h].split(":");g.length==3&&o.f.push(g.pop());var v="";g.length==2&&g[1]!=""&&(v=":"),o.a.push(g.join(v))}}function Dt(o){if(o.a.length==0)throw Error("No fonts to load!");if(o.c.indexOf("kit=")!=-1)return o.c;for(var a=o.a.length,f=[],h=0;h<a;h++)f.push(o.a[h].replace(/ /g,"+"));return a=o.c+"?family="+f.join("%7C"),0<o.f.length&&(a+="&subset="+o.f.join(",")),0<o.g.length&&(a+="&text="+encodeURIComponent(o.g)),a}function Ft(o){this.f=o,this.a=[],this.c={}}var Ke={latin:"BESbswy","latin-ext":"\xE7\xF6\xFC\u011F\u015F",cyrillic:"\u0439\u044F\u0416",greek:"\u03B1\u03B2\u03A3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},et={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},yt={i:"i",italic:"i",n:"n",normal:"n"},tt=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function wt(o){for(var a=o.f.length,f=0;f<a;f++){var h=o.f[f].split(":"),g=h[0].replace(/\+/g," "),v=["n4"];if(2<=h.length){var C,R=h[1];if(C=[],R)for(var R=R.split(","),j=R.length,V=0;V<j;V++){var Y;if(Y=R[V],Y.match(/^[\w-]+$/)){var ie=tt.exec(Y.toLowerCase());if(ie==null)Y="";else{if(Y=ie[2],Y=Y==null||Y==""?"n":yt[Y],ie=ie[1],ie==null||ie=="")ie="4";else var de=et[ie],ie=de||(isNaN(ie)?"4":ie.substr(0,1));Y=[Y,ie].join("")}}else Y="";Y&&C.push(Y)}0<C.length&&(v=C),h.length==3&&(h=h[2],C=[],h=h?h.split(","):C,0<h.length&&(h=Ke[h[0]])&&(o.c[g]=h))}for(o.c[g]||(h=Ke[g])&&(o.c[g]=h),h=0;h<v.length;h+=1)o.a.push(new S(g,v[h]))}}function rt(o,a){this.c=o,this.a=a}var st={Arimo:!0,Cousine:!0,Tinos:!0};rt.prototype.load=function(o){var a=new ye,f=this.c,h=new pt(this.a.api,this.a.text),g=this.a.families;mt(h,g);var v=new Ft(g);wt(v),ee(f,Dt(h),he(a)),Te(a,function(){o(v.a,v.c,st)})};function $e(o,a){this.c=o,this.a=a}$e.prototype.load=function(o){var a=this.a.id,f=this.c.o;a?pe(this.c,(this.a.api||"https://use.typekit.net")+"/"+a+".js",function(h){if(h)o([]);else if(f.Typekit&&f.Typekit.config&&f.Typekit.config.fn){h=f.Typekit.config.fn;for(var g=[],v=0;v<h.length;v+=2)for(var C=h[v],R=h[v+1],j=0;j<R.length;j++)g.push(new S(C,R[j]));try{f.Typekit.load({events:!1,classes:!1,async:!0})}catch(V){}o(g)}},2e3):o([])};function Pt(o,a){this.c=o,this.f=a,this.a=[]}Pt.prototype.load=function(o){var a=this.f.id,f=this.c.o,h=this;a?(f.__webfontfontdeckmodule__||(f.__webfontfontdeckmodule__={}),f.__webfontfontdeckmodule__[a]=function(g,v){for(var C=0,R=v.fonts.length;C<R;++C){var j=v.fonts[C];h.a.push(new S(j.name,F("font-weight:"+j.weight+";font-style:"+j.style)))}o(h.a)},pe(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+W(this.c)+"/"+a+".js",function(g){g&&o([])})):o([])};var ge=new Ye(window);ge.a.c.custom=function(o,a){return new Qe(a,o)},ge.a.c.fontdeck=function(o,a){return new Pt(a,o)},ge.a.c.monotype=function(o,a){return new Ue(a,o)},ge.a.c.typekit=function(o,a){return new $e(a,o)},ge.a.c.google=function(o,a){return new rt(a,o)};var nt={load:L(ge.load,ge)};M=function(){return nt}.call(O,m,O,k),M!==void 0&&(k.exports=M)})()}},At={};function Ce(k){var O=At[k];if(O!==void 0)return O.exports;var m=At[k]={exports:{}};return Wr[k](m,m.exports,Ce),m.exports}Ce.n=k=>{var O=k&&k.__esModule?()=>k.default:()=>k;return Ce.d(O,{a:O}),O},Ce.d=(k,O)=>{for(var m in O)Ce.o(O,m)&&!Ce.o(k,m)&&Object.defineProperty(k,m,{enumerable:!0,get:O[m]})},Ce.o=(k,O)=>Object.prototype.hasOwnProperty.call(k,O);var oo={};(()=>{"use strict";class k extends Phaser.Scene{preload(){}create(){console.log("Story Scene created...")}}const O=r=>({title:r,template:"titleDelimiter"});class m extends Phaser.GameObjects.Container{constructor({scene:e,text:t}){super(e);const s=e.add.text(0,0,t,{fontSize:"32px",color:"#dedede"});this.add([s]),e.add.existing(this)}}var M=(r,e,t)=>new Promise((s,n)=>{var i=c=>{try{u(t.next(c))}catch(d){n(d)}},l=c=>{try{u(t.throw(c))}catch(d){n(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(i,l);u((t=t.apply(r,e)).next())});const $={title:"TestButton",run:r=>M(void 0,null,function*(){const e=new m({scene:r,text:"Hello"});return()=>{e.destroy()}})},D={title:"TestButton 2",run:r=>M(void 0,null,function*(){const e=new m({scene:r,text:"Hello2"});return()=>{e.destroy()}})},L=JSON.parse('[{"id":1,"title":"Arannis the Swift","description":"Elven Ranger: A skilled archer with keen senses and agility.","quote":"Swift as the wind, silent as the night.","attack":4,"health":3},{"id":2,"title":"Thorin Ironfist","description":"Dwarven Warrior: A stout warrior with unmatched strength and endurance.","quote":"Through stone and steel, I endure.","attack":5,"health":4},{"id":3,"title":"Sir Galahad the Brave","description":"Human Paladin: A holy knight who protects the weak and vanquishes evil.","quote":"In the light, I stand firm.","attack":3,"health":5},{"id":4,"title":"Gruk Bloodfury","description":"Orc Berserker: A ferocious fighter driven by rage and fury.","quote":"Blood and thunder!","attack":6,"health":3},{"id":5,"title":"Eldrin the Wise","description":"Mystic Sorcerer: A powerful spellcaster who wields arcane magic.","quote":"Magic is the key to the universe.","attack":5,"health":2}]');var I=Object.defineProperty,ae=Object.defineProperties,re=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,N=(r,e,t)=>e in r?I(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,J=(r,e)=>{for(var t in e||(e={}))q.call(e,t)&&N(r,t,e[t]);if(le)for(var t of le(e))H.call(e,t)&&N(r,t,e[t]);return r},W=(r,e)=>ae(r,re(e));const ee="player",pe={players_1_fantasy_pack5:L.map(r=>W(J({},r),{type:ee}))},ye=J({},pe),he=JSON.parse('{"kR":[{"id":1,"title":"Goblin","attack":2,"health":1,"description":"Small, sneaky, and quick. Loves to ambush unsuspecting adventurers.","quote":"Sly as a fox, quick as a shadow."},{"id":2,"title":"Skeleton Warrior","attack":3,"health":2,"description":"A reanimated skeleton wielding a rusty sword.","quote":"Death cannot stop me!"},{"id":3,"title":"Orc Brute","attack":4,"health":4,"description":"A strong and fierce warrior with a brutal club.","quote":"Strength is everything."},{"id":4,"title":"Dark Elf Archer","attack":5,"health":3,"description":"Skilled in archery and dark magic, attacks from a distance.","quote":"Silent and deadly."},{"id":5,"title":"Stone Golem","attack":6,"health":5,"description":"A massive construct made of stone, very hard to damage.","quote":"Unyielding as the mountains."},{"id":6,"title":"Fire Elemental","attack":7,"health":4,"description":"A being of living flame, burns everything in its path.","quote":"Feel the heat of my wrath!"},{"id":7,"title":"Vampire Lord","attack":8,"health":6,"description":"A powerful vampire with a thirst for blood and dark powers.","quote":"Your blood will sustain me."},{"id":8,"title":"Dragon Hatchling","attack":8,"health":8,"description":"A young dragon, already formidable with its fiery breath.","quote":"Even young, I am fearsome."}]}'),Te=JSON.parse(`{"kR":[{"id":1,"title":"Giant Rat","attack":1,"health":2,"description":"A large, aggressive rodent found in dark places.","quote":"Gnawing through darkness."},{"id":2,"title":"Zombie","attack":2,"health":3,"description":"A slow-moving, undead creature with a hunger for flesh.","quote":"Hunger drives me forward."},{"id":3,"title":"Bandit","attack":3,"health":4,"description":"A rogue outlaw, skilled with a blade and cunning tactics.","quote":"Your gold or your life."},{"id":4,"title":"Troll","attack":4,"health":5,"description":"A massive creature with regenerative abilities.","quote":"You can't keep me down."},{"id":5,"title":"Wraith","attack":5,"health":6,"description":"A ghostly entity that drains the life from its victims.","quote":"Feel the chill of the grave."},{"id":6,"title":"Minotaur","attack":6,"health":7,"description":"A powerful beast-man with a deadly axe.","quote":"Prepare to face the beast."},{"id":7,"title":"Chimera","attack":7,"health":5,"description":"A monstrous creature with the heads of a lion, goat, and snake.","quote":"Three heads, triple the terror."},{"id":8,"title":"Wyvern","attack":8,"health":8,"description":"A winged serpent-like dragon, fierce and venomous.","quote":"My venom will be your end."}]}`);var Le=Object.defineProperty,_=Object.defineProperties,S=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,A=(r,e,t)=>e in r?Le(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,F=(r,e)=>{for(var t in e||(e={}))P.call(e,t)&&A(r,t,e[t]);if(p)for(var t of p(e))T.call(e,t)&&A(r,t,e[t]);return r},X=(r,e)=>_(r,S(e));const E="monster",b={monsters_1_fantasy_pack8:he.kR.map(r=>X(F({},r),{type:E})),monsters_2_fantasy_pack8:Te.kR.map(r=>X(F({},r),{type:E}))},G=F({},b),we=JSON.parse(`{"kR":[{"id":1,"title":"Golden Crown","description":"A magnificent crown encrusted with precious gems.","quote":"Fit for a king.","bonuses":{"gold":50}},{"id":2,"title":"Healing Potion","description":"A potion that restores health when consumed.","quote":"A sip of life.","bonuses":{"health":1}},{"id":3,"title":"Sword of Valor","description":"A legendary sword that increases attack power.","quote":"Strike with honor.","bonuses":{"attack":2}},{"id":4,"title":"Enchanted Shield","description":"A shield that enhances defense and fortitude.","quote":"Stand strong.","bonuses":{"health":1}},{"id":5,"title":"Bag of Gold Coins","description":"A hefty bag filled with glittering gold coins.","quote":"Riches beyond measure.","bonuses":{"gold":30}},{"id":6,"title":"Amulet of Strength","description":"An amulet that grants the wearer immense strength.","quote":"Power flows through you.","bonuses":{"attack":1}},{"id":7,"title":"Ring of Vitality","description":"A ring that enhances the wearer's vitality.","quote":"Life surges within.","bonuses":{"health":1}},{"id":8,"title":"Treasure Map","description":"A map leading to untold riches.","quote":"X marks the spot.","bonuses":{"gold":40}},{"id":9,"title":"Mystic Orb","description":"An orb that enhances magical abilities.","quote":"Unleash the arcane.","bonuses":{"attack":1}},{"id":10,"title":"Chalice of Healing","description":"A chalice that restores health when used.","quote":"Drink to your health.","bonuses":{"health":1}},{"id":11,"title":"Golden Armor","description":"A suit of armor made of pure gold, offering unparalleled protection.","quote":"Gleaming and strong.","bonuses":{"health":1}},{"id":12,"title":"Crystal Wand","description":"A wand that enhances spell casting abilities.","quote":"Wield the power of the crystals.","bonuses":{"attack":1}},{"id":13,"title":"Jeweled Dagger","description":"A dagger adorned with jewels, deadly and beautiful.","quote":"Beauty in the kill.","bonuses":{"attack":2}},{"id":14,"title":"Silver Chalice","description":"A chalice that restores health when used.","quote":"Drink and be restored.","bonuses":{"health":1}},{"id":15,"title":"Bag of Gems","description":"A bag filled with valuable gems.","quote":"Gems of great worth.","bonuses":{"gold":40}},{"id":16,"title":"Staff of Power","description":"A staff that greatly enhances magical attacks.","quote":"Unleash the fury of the ancients.","bonuses":{"attack":3}}]}`);var ke=Object.defineProperty,Z=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,Q=(r,e,t)=>e in r?ke(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,te=(r,e)=>{for(var t in e||(e={}))Oe.call(e,t)&&Q(r,t,e[t]);if(K)for(var t of K(e))be.call(e,t)&&Q(r,t,e[t]);return r},xe=(r,e)=>Z(r,ue(e));const qe="treasure",Xe={treasures_1_fantasy_pack16:we.kR.map(r=>xe(te({},r),{type:qe}))},jt=te({},Xe),Ne={en:JSON.parse('{"game.name":"Treasures and Monsters","ui.health":"Health","ui.gold":"Gold","ui.attack":"Attack"}')};class Ge{static text(e){var t;return(t=Ne[this.locale][e])!=null?t:Ne.en[e]}static getCardTexts(e){return{title:e.title,description:e.description,quote:e.quote}}}Ge.locale="en";var Ze=Object.defineProperty,Ye=Object.getOwnPropertySymbols,dt=Object.prototype.hasOwnProperty,ft=Object.prototype.propertyIsEnumerable,Ue=(r,e,t)=>e in r?Ze(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Qe=(r,e)=>{for(var t in e||(e={}))dt.call(e,t)&&Ue(r,t,e[t]);if(Ye)for(var t of Ye(e))ft.call(e,t)&&Ue(r,t,e[t]);return r};const pt={cellSize:72,columns:18,rows:14,positions:{player:{column:1,row:1}},path:{pathColor:"#88e7ac"},selector:{selectorColor:"#88e7ac"},gamePlay:{openedTreasuresProbability:.5,openedMonsterProbability:.5,monstersTotal:14,treasuresTotal:28,portalTreasurePrice:8},playerCard:pe.players_1_fantasy_pack5[0],monsterCards:[...b.monsters_1_fantasy_pack8],treasureCards:[...Xe.treasures_1_fantasy_pack16],terrainRules:[{type:"mountain",speedK:0,probability:.05},{type:"water",speedK:0,probability:.2},{type:"forest",speedK:.75,probability:.2},{type:"sand",speedK:.5,probability:.2},{type:"grass",speedK:.5,probability:.2},{type:"ground",speedK:.5,probability:.2}],terrainColors:{mountain:"#5d1d06",water:"#4682B4",forest:"#005e00",sand:"#fce76c",grass:"#477242",ground:"#675437"}},gt=Qe({},pt);function mt(r,e){if(r.length===0)throw new Error("Array is empty");let t,s=0;for(let n=0;n<r.length;n++)(e===void 0||e(r[n]))&&(s++,Math.random()<1/s&&(t=r[n]));if(t==null)throw new Error("No element matches the filter criteria");return t}const Dt=r=>r[Math.floor(Math.random()*r.length)];function Ft(r){return r.sort(()=>Math.random()-.5)}function Ke(r){for(let e=r.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[r[e],r[t]]=[r[t],r[e]]}return r}function et(r,e){if(e<=0)return[];const t=[];let s=0;for(;t.length<e;)t.push(r[s]),s=(s+1)%r.length;return t}var yt=Object.defineProperty,tt=Object.getOwnPropertySymbols,wt=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable,st=(r,e,t)=>e in r?yt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$e=(r,e)=>{for(var t in e||(e={}))wt.call(e,t)&&st(r,t,e[t]);if(tt)for(var t of tt(e))rt.call(e,t)&&st(r,t,e[t]);return r};class Pt{constructor(e){this.props=e,this.cellMap={}}log(){const e=Object.values(this.cellMap),t=e.reduce((n,i)=>$e($e({},n),i),{}),s=Object.values(t).flat();console.log("CellMapCollider -----------"),console.log("cellSize",this.props.cellSize),console.log("cells amount",e.length),console.log("cellMap",this.cellMap),console.log("objects amount",s.length)}forCellsInPlace(e,t){const s=this.getCellOrdinate(e.left),n=this.getCellOrdinate(e.left+e.width),i=this.getCellOrdinate(e.top),l=this.getCellOrdinate(e.top+e.height);for(let u=i;u<=l;u++)for(let c=s;c<=n;c++)if(t(c,u))return}forObjectsInPlace(e,t){this.forCellsInPlace(e,(s,n)=>{const i=this.cellMap[this.getCellKey(s,n)];if(i)return t(i)})}getCurrentObjectCells(e){const t={};return this.forObjectCoveredCells(e,(s,n)=>{const i=this.getCellKey(s,n);this.cellMap[i]&&(t[i]=this.cellMap[i])}),t}getCurrentObjectCellsAsArray(e){return Object.values(this.getCurrentObjectCells(e))}add(e){this.addToCells(e)}remove(e){this.forCellsInPlace(e,(t,s)=>{const n=this.getCellObjects(t,s);n!=null&&(delete n[e.id],Object.values(n).length===0&&delete this.cellMap[this.getCellKey(t,s)])})}update(e,t,s){this.remove(e),e.left=t,e.top=s,this.add(e)}getAllObjects(e){const t={};return this.forObjectsInPlace(e,s=>{for(const n in s)t[n]=s[n]}),t}getFirstCollisionObject(e){let t;return this.forObjectsInPlace(e,s=>{for(const n in s){const i=s[n];if(i.id!==e.id&&isCollide(e,i))return t=i,!0}return!1}),t}forObjectCoveredCells(e,t){this.forCellsInPlace(e,t)}getCellOrdinate(e){return Math.floor(e/this.props.cellSize)}destroy(){this.cellMap={}}isPlaceFree(e){let t=!0;return this.forObjectsInPlace(e,s=>{for(const n in s){const i=s[n];if(isCollide(e,i))return t=!1,!0}}),t}getCellKey(e,t){return`${e}_${t}`}getCellObjectsAlways(e,t){return this.cellMap[this.getCellKey(e,t)]==null&&(this.cellMap[this.getCellKey(e,t)]={}),this.cellMap[this.getCellKey(e,t)]}getCellObjects(e,t){return this.cellMap[this.getCellKey(e,t)]}addToCells(e){this.forCellsInPlace(e,(t,s)=>{const n=this.getCellObjectsAlways(t,s);n[e.id]=e})}}function ge(r,e){const t=r.length;if(t==0)return;const s=r[0].length;if(s!=0){for(let n=0;n<t;n++)for(let i=0;i<s;i++)if(e(r[n][i],n,i))return}}function nt(r,e){return Math.floor(r/e)}function o(r,e){return r*e+e/2}function a(r,e){return Math.floor(r/e)}function f(r,e){return r*e+e/2}function h(r,e){return Math.ceil(r/e)}function g(r,e){return Math.ceil(r/e)}function v(r,e,t){const s=Array.from(new Array(r));return s.forEach((n,i)=>{const l=Array.from(new Array(e));l.forEach((u,c)=>{l[c]=t(i,c)}),s[i]=l}),s}const C={invalidIndex:"Invalid column or row index."};class R{constructor(e){if(this.props=e,this.set=new Set,e.columns<=0||e.rows<=0)throw new Error("Both columns and rows must be positive numbers.")}clear(){this.set.clear()}add(e,t){if(!this.isValidIndexHandle(e,t))return!1;const s=this.getArrayIndex(e,t);return this.set.has(s)?!1:(this.set.add(s),!0)}has(e,t){return this.isValidIndexHandle(e,t)?this.set.has(this.getArrayIndex(e,t)):!1}delete(e,t){return this.isValidIndexHandle(e,t)?this.set.delete(this.getArrayIndex(e,t)):!1}isValidIndex(e,t){return e>=0&&e<this.props.columns&&t>=0&&t<this.props.rows}isValidIndexHandle(e,t){if(this.isValidIndex(e,t))return!0;if(this.props.isValidError)throw new Error(C.invalidIndex);return console.warn(C.invalidIndex),!1}getArrayIndex(e,t){return t*this.props.columns+e}}function j(r){return .75*r}function V(r){return Math.sqrt(3)*r/2}function Y(r,e){const t=j(e);return nt(r,t)}function ie(r,e,t){const s=j(t),n=V(t),u=nt(r,s)%2===1?n/2:0;return a(e-u,n)}function de(r,e){const t=[],n=r%2===0?[{column:-1,row:0},{column:-1,row:-1},{column:0,row:-1},{column:1,row:-1},{column:1,row:0},{column:0,row:1}]:[{column:-1,row:1},{column:-1,row:0},{column:0,row:-1},{column:1,row:0},{column:1,row:1},{column:0,row:1}];for(const i of n){const l=r+i.column,u=e+i.row;t.push({column:l,row:u})}return t}function Me(r,e){const t=r,s=e-(r-(r&1))/2,n=-t-s;return{x:t,y:n,z:s}}function ot(r,e,t){const s=r,n=t+(r-(r&1))/2;return{column:s,row:n}}function Rt(r,e,t){const s=[],{x:n,y:i,z:l}=Me(r,e);for(let u=-t;u<=t;u++)for(let c=Math.max(-t,-u-t);c<=Math.min(t,-u+t);c++){const d=-u-c,y=n+u,w=i+c,x=l+d;if(u!==0||c!==0||d!==0){const B=ot(y,w,x);s.push(B)}}return s}function Lt(r){const{column:e,row:t,cellRadius:s,rows:n,columns:i,includeCenter:l}=r,u=[],{x:c,y:d,z:y}=Me(e,t);for(let w=-s;w<=s;w++)for(let x=Math.max(-s,-w-s);x<=Math.min(s,-w+s);x++){const B=-w-x,ne=c+w,_e=d+x,Ee=y+B;if(l||(w!==0||x!==0||B!==0)){const ve=ot(ne,_e,Ee);Vr(ve,i,n)&&u.push(ve)}}return u}function Vr(r,e,t){const{column:s,row:n}=r;return s>=0&&s<e&&n>=0&&n<t}class io{constructor(e){this.props=e;const{columns:t,rows:s}=this.props;this.grid=makeArray2D(t,s,(n,i)=>!1)}clear(){forEach2D(this.grid,(e,t,s)=>this.grid[t][s]=!1)}add(e,t){if(!this.isValidPosition(e,t))return!1;const s=!this.has(e,t);return this.grid[e][t]=!0,s}has(e,t){return this.isValidPosition(e,t)?this.grid[e][t]===!0:!0}delete(e,t){const s=this.has(e,t);return this.grid[e][t]=!1,s}isValidPosition(e,t){const{columns:s,rows:n}=this.props;return!(e<0||e>=s||t<0||t>=n)}isFree(e,t,s=0){if(this.has(e,t))return!1;if(s===0)return!0;const n=s===1?getHexNears(e,t):getHexNearsInRadius(e,t,s);for(let i=0;i<n.length;i++){const{column:l,row:u}=n[i];if(this.has(l,u))return!1}return!0}}var zr=Object.defineProperty,Xr=Object.defineProperties,Yr=Object.getOwnPropertyDescriptors,kt=Object.getOwnPropertySymbols,Ur=Object.prototype.hasOwnProperty,Kr=Object.prototype.propertyIsEnumerable,Gt=(r,e,t)=>e in r?zr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Bt=(r,e)=>{for(var t in e||(e={}))Ur.call(e,t)&&Gt(r,t,e[t]);if(kt)for(var t of kt(e))Kr.call(e,t)&&Gt(r,t,e[t]);return r},Nt=(r,e)=>Xr(r,Yr(e));function ao(r){return getAbstractGridPath(Nt(Bt({},r),{getNears:(e,t)=>getEightNearsColumnRows(e,t)}))}function lo(r){return getAbstractGridPath(Nt(Bt({},r),{getNears:(e,t)=>getFourNearsColumnRows(e,t)}))}const $r=(r,e)=>!0;function qr({from:r,to:e,isWalkable:t=$r,columnMin:s=0,columnMax:n,rowMin:i=0,rowMax:l,maxChecks:u=1e4,getNears:c}){if(!t(e.column,e.row))return[];const d=[],y=new Set,w={cell:r,cost:0};d.push(w);let x=0;for(;d.length>0;){d.sort((oe,ve)=>Ht(oe.cell,e)-Ht(ve.cell,e));const B=d.shift();if(!B)break;const{cell:ne,cost:_e}=B;if(x++,x>u)return console.warn("checkedCells>maxChecks in getHexPath"),[];if(ne.column===e.column&&ne.row===e.row)return Jr(B);y.add(`${ne.column},${ne.row}`);const Ee=c(ne.column,ne.row);for(const oe of Ee){if(oe.column<s||oe.row<i||n&&oe.column>n||l&&oe.row>l)continue;const ve=`${oe.column},${oe.row}`;if(!y.has(ve)&&t(oe.column,oe.row)){const ze={cell:oe,cost:_e+1,previous:B},je=d.find(De=>De.cell.column===oe.column&&De.cell.row===oe.row);(!je||ze.cost<je.cost)&&(je&&d.splice(d.indexOf(je),1),d.push(ze))}}}return[]}function Jr(r){const e=[];let t=r;for(;t;)e.unshift(t.cell),t=t.previous;return e}function Ht(r,e){const t=r.column-e.column,s=r.row-e.row;return Math.sqrt(t*t+s*s)}var Zr=Object.defineProperty,Qr=Object.defineProperties,es=Object.getOwnPropertyDescriptors,Wt=Object.getOwnPropertySymbols,ts=Object.prototype.hasOwnProperty,rs=Object.prototype.propertyIsEnumerable,Vt=(r,e,t)=>e in r?Zr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ss=(r,e)=>{for(var t in e||(e={}))ts.call(e,t)&&Vt(r,t,e[t]);if(Wt)for(var t of Wt(e))rs.call(e,t)&&Vt(r,t,e[t]);return r},ns=(r,e)=>Qr(r,es(e));function zt(r){return qr(ns(ss({},r),{getNears:(e,t)=>Rt(e,t,1)}))}var co=Ce(477);class os{constructor(){this.resources={images:[],sounds:[],sprites:[],jsons:[]}}addImage(e){vt(e).forEach(t=>this.resources.images.push(t))}addSound(e){vt(e).forEach(t=>this.resources.sounds.push(t))}addSpriteSheet(e){vt(e).forEach(t=>this.resources.sprites.push(t))}getResources(){return this.resources}}function vt(r){return Array.isArray(r)?r:[r]}const uo=new os;function se(r){try{return parseInt(r.replace("#","0x"))}catch(e){return console.warn("cssColorToInt: use cssColor with # prefix "),14606046}}class ho extends Phaser.GameObjects.Image{constructor(e){const{scene:t,draw:s,width:n,height:i,textureKey:l}=e,{textures:u}=t;if(!u.exists(l)){const c=t.textures.createCanvas(l,n,i);c==null?console.warn("null scene.textures.createCanvas"):(s(c.getContext()),c.refresh())}super(t,0,0,l)}}const is={frame:"__BASE",top:0,bottom:0,width:128,height:128,left:0,right:0,zoom:1};var as=Object.defineProperty,Xt=Object.getOwnPropertySymbols,ls=Object.prototype.hasOwnProperty,cs=Object.prototype.propertyIsEnumerable,Yt=(r,e,t)=>e in r?as(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ut=(r,e)=>{for(var t in e||(e={}))ls.call(e,t)&&Yt(r,t,e[t]);if(Xt)for(var t of Xt(e))cs.call(e,t)&&Yt(r,t,e[t]);return r};class fo extends Phaser.GameObjects.RenderTexture{constructor(e){super(e.scene,0,0,Math.ceil(e.width*e.zoom),Math.ceil(e.height*e.zoom)),this.cols=[],this.rows=[],this.config=Ut(Ut({},is),e),this.ceilSizes(),this.updateTexture()}ceilSizes(){const{config:e}=this,{zoom:t}=e;e.width=Math.ceil(e.width*t),e.height=Math.ceil(e.height*t),e.top=Math.ceil(e.top*t),e.left=Math.ceil(e.left*t),e.right=Math.ceil(e.right*t),e.bottom=Math.ceil(e.bottom*t)}resize(e,t){return this.width===e&&this.height===t?this:(super.resize(e,t),this.config!=null&&this.updateTexture(),this)}updateTexture(){this.setupSourceTexture(),this.drawCells()}setupSourceTexture(){const{scene:e,config:t}=this;this.srcTexture=e.textures.get(t.texture),this.srcFrame=this.srcTexture.get(t.frame),this.setupFrameSizes(),this.makeFrames(),this.restoreFirstFrame()}setupFrameSizes(){this.setColumns(),this.setRows()}setColumns(){const{width:e,srcFrame:t}=this;if(t==null)return;const{width:s}=t,{left:n,right:i}=this.config;this.cols=[],this.cols[0]={srcWidth:n,destWidth:n},this.cols[1]={srcWidth:Math.max(s-n-i,1),destWidth:Math.max(e-n-i,0)},this.cols[2]={srcWidth:i,destWidth:i}}setRows(){const{height:e,srcFrame:t}=this;if(t==null)return;const{height:s}=t,{top:n,bottom:i}=this.config;this.rows=[],this.rows[0]={srcHeight:n,destHeight:n},this.rows[1]={srcHeight:Math.max(s-n-i,1),destHeight:Math.max(e-n-i,0)},this.rows[2]={srcHeight:i,destHeight:i}}makeFrames(){const{rows:e,cols:t,srcTexture:s,srcFrame:n}=this;if(n==null||s==null)return;let i=n.cutY;for(let l=0;l<e.length;l++){const{srcHeight:u}=e[l];if(u==0)continue;let c=n.cutX;for(let d=0;d<t.length;d++){const{srcWidth:y}=t[d];if(y==0)continue;const w=this.getFrameName(d,l);s.add(w,0,c,i,y,u),c=c+y}i=i+u}}restoreFirstFrame(){this.srcTexture!=null&&(this.srcTexture.firstFrame=this.config.frame)}getFrameName(e,t){return`${this.config.frame}_${e}_${t}`}drawCells(){const{rows:e,cols:t,srcTexture:s,config:n}=this;if(s==null)return;let i=0;for(let l=0;l<e.length;l++){const{destHeight:u}=e[l];if(u==0)continue;let c=0;for(let d=0;d<t.length;d++){const{destWidth:y}=t[d];if(y==0)continue;const x=(d===1||l===1)&&n.isTiled?this.drawTile(d,l,y,u):this.drawImage(d,l,y,u);this.draw(x,c,i),x.destroy(),c=Math.ceil(c+y)}i=Math.ceil(i+u)}}drawImage(e,t,s,n){const{config:i,scene:l,srcTexture:u}=this,{texture:c}=i,d=this.getFrameName(e,t),y=u.frames[d],w=s/y.width,x=n/y.height,B=l.make.image({key:c,frame:d,x:0,y:0});return B.setScale(w,x).setOrigin(0,0),B}drawTile(e,t,s,n){const{config:i,scene:l}=this,{texture:u}=i,c=this.getFrameName(e,t),d=l.make.tileSprite({key:u,frame:c,x:0,y:0,width:s,height:n});return d.setOrigin(0,0),d}}var po=Ce(787);const go={duration:1200,origin:.5,textStyle:{fontSize:"36px",color:"white",fontFamily:"Open Sans",align:"center",strokeThickness:4,stroke:"#000000"},velocityX:0,velocityY:-100,text:"Hello",x:200,y:200};var us=Object.defineProperty,Kt=Object.getOwnPropertySymbols,hs=Object.prototype.hasOwnProperty,ds=Object.prototype.propertyIsEnumerable,$t=(r,e,t)=>e in r?us(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,qt=(r,e)=>{for(var t in e||(e={}))hs.call(e,t)&&$t(r,t,e[t]);if(Kt)for(var t of Kt(e))ds.call(e,t)&&$t(r,t,e[t]);return r};class mo{constructor(e){this.props=qt(qt({},DefaultTextFloaterProps),e);const{scene:t,text:s,textStyle:n={},x:i,y:l,origin:u=.5}=this.props;this.textNode=new Phaser.GameObjects.Text(t,i,l,s,n).setOrigin(u).setVisible(!1)}runAnimation(e=this.props.text,t=this.props.x,s=this.props.y){const{textNode:n,props:i}=this,{scene:l}=i;i.x=t,i.y=s,i.text=e,n.setText(e),l.tweens.add(this.buildConfig(i))}buildConfig(e){const{textNode:t}=this,{scene:s,duration:n,velocityX:i,velocityY:l,x:u,y:c}=e;return{targets:t,props:{alpha:0,x:u+n*i/1e3,y:c+n*l/1e3},duration:n,onStart:()=>{t.x=u,t.y=c,s.add.existing(t),t.setVisible(!0),t.alpha=1},onComplete:()=>t.setVisible(!1)}}}const Jt=class ht{constructor(e){e&&(this.anchorItem=e)}anchor(e){return this.anchorItem=e,this}anchorScreen(e,t){return this.anchor({getBounds:()=>new Phaser.Geom.Rectangle(0,0,e,t)})}anchorSceneScreen(e){const{width:t,height:s}=e.cameras.main;return this.anchorScreen(t,s)}center(e,t=0,s=0){return this.applyFormula(e,t,s,({aB:n,iB:i})=>({x:n.x+(n.width-i.width)/2,y:n.y+(n.height-i.height)/2}))}centerX(e,t=0){return this.applyFormula(e,t,0,({aB:s,iB:n})=>({x:s.x+(s.width-n.width)/2,y:n.y}))}centerY(e,t=0){return this.applyFormula(e,0,t,({aB:s,iB:n})=>({x:n.x,y:s.y+(s.height-n.height)/2}))}bottomIn(e,t=0){return this.applyFormula(e,0,t,({aB:s,iB:n})=>({x:n.x,y:s.y+(s.height-n.height)}))}bottomTo(e,t=0){return this.applyFormula(e,0,t,({aB:s,iB:n})=>({x:n.x,y:s.y+s.height}))}topIn(e,t=0){return this.applyFormula(e,0,t,({aB:s,iB:n})=>({x:n.x,y:s.y}))}topTo(e,t=0){return this.applyFormula(e,0,t,({aB:s,iB:n})=>({x:n.x,y:s.y-n.height}))}rightIn(e,t=0){return this.applyFormula(e,t,0,({aB:s,iB:n})=>({x:s.x+(s.width-n.width),y:n.y}))}rightTo(e,t=0){return this.applyFormula(e,t,0,({aB:s,iB:n})=>({x:s.x+s.width,y:n.y}))}leftIn(e,t=0){return this.applyFormula(e,t,0,({aB:s,iB:n})=>({x:s.x,y:n.y}))}leftTo(e,t=0){return this.applyFormula(e,t,0,({aB:s,iB:n})=>({x:s.x-n.width,y:n.y}))}setPosition(e,t,s){return ht.setLeftTop(e,t,s),this}static setLeftTop(e,t,s){const n=e.getBounds(),i=t-n.left,l=s-n.top,u=e.x+i,c=e.y+l;e.setPosition(u,c)}row(e,t){this.anchor(e[0]);for(let s=1;s<e.length;s++){const n=e[s];this.rightTo(n,t),this.anchor(n)}return this}column(e,t){this.anchor(e[0]);for(let s=1;s<e.length;s++){const n=e[s];this.bottomTo(n,t),this.anchor(n)}return this}applyFormula(e,t,s,n){const{anchorItem:i}=this;if(i==null)return console.warn(ht.errorSetAnchorMessage),this;if(e==null)return console.warn(ht.errorSetAnchorMessage),this;const{x:l,y:u}=n(this.getBounds(e,i));return this.setPosition(e,l+t,u+s),this}getBounds(e,t){return{aB:t==null?void 0:t.getBounds(),iB:e==null?void 0:e.getBounds()}}};Jt.errorSetAnchorMessage="set anchor in Align first";let He=Jt;const St={textPaddingX:48,textPaddingY:48,fontSize:42};class yo extends Phaser.GameObjects.Container{constructor(e){super(e.scene,0,0),this.props=e;const{scene:t,text:s,fontSize:n=St.fontSize}=e,i={fontFamily:"Open Sans",fontSize:`${n}px`,color:"#ffffff"},l=new Phaser.GameObjects.Text(t,0,0,s,i),{textPaddingX:u=St.textPaddingX,textPaddingY:c=St.textPaddingY}=e,d=l.getBounds(),{width:y=d.width+u*2,height:w=d.height+c*2}=e,x=se("#000000"),B=se("#c0bebe"),ne=new Phaser.GameObjects.Rectangle(t,0,0,y,w);ne.setFillStyle(x,.75),ne.setStrokeStyle(2,B),new He(ne).center(l),this.add(ne),this.add(l),this.bg=ne,this.textNode=l}setText(e){this.textNode.setText(e),new He(this.bg).center(this.textNode)}get inputZone(){return this.bg}}const wo={lineStyle:{width:2,color:se("#00ff00"),alpha:1},fillStyle:{color:se("#00ff00"),alpha:1}};var fs=Object.defineProperty,Zt=Object.getOwnPropertySymbols,ps=Object.prototype.hasOwnProperty,gs=Object.prototype.propertyIsEnumerable,Qt=(r,e,t)=>e in r?fs(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ms=(r,e)=>{for(var t in e||(e={}))ps.call(e,t)&&Qt(r,t,e[t]);if(Zt)for(var t of Zt(e))gs.call(e,t)&&Qt(r,t,e[t]);return r};class Po{constructor(e){this.scene=e,this.scene=e,this.graphics=this.scene.add.graphics(ms({},defaultPhaserDrawStyle))}resetFillStyle(){this.graphics.fillStyle(defaultPhaserDrawStyle.fillStyle.color,defaultPhaserDrawStyle.fillStyle.alpha)}resetLineStyle(){this.graphics.lineStyle(defaultPhaserDrawStyle.lineStyle.width,defaultPhaserDrawStyle.lineStyle.color)}destroy(){this.graphics.destroy(!0)}clear(){this.graphics.clear()}line(e,t){if(e.length<2){console.warn("PhaserDraw : need 2 points for line");return}const{graphics:s}=this;t?s.lineStyle(t.width,t.color,t.alpha):this.resetLineStyle(),s.beginPath(),s.moveTo(e[0].x,e[0].y);for(let n=1;n<e.length;n++)s.lineTo(e[n].x,e[n].y);s.strokePath()}points(e,t){var s;t?this.graphics.fillStyle(t.color,t.alpha):this.resetFillStyle();const n=(s=t==null?void 0:t.radius)!=null?s:5;e.forEach(i=>{this.graphics.fillCircle(i.x,i.y,n)})}}var vo=Ce(310);function er(r){return JSON.parse(JSON.stringify(r))}const{KeyCodes:ce}=Phaser.Input.Keyboard,ys={mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,parent:"game",width:960,height:640},ws={type:Phaser.AUTO,backgroundColor:2236962,transparent:!0,scale:ys,scene:[]},Ps={fontSize:"24px",color:"#dedede"},vs={left:[ce.LEFT,ce.A],right:[ce.RIGHT,ce.D],up:[ce.UP,ce.W],down:[ce.DOWN,ce.S]};var Ss=Object.defineProperty,tr=Object.getOwnPropertySymbols,Cs=Object.prototype.hasOwnProperty,Os=Object.prototype.propertyIsEnumerable,rr=(r,e,t)=>e in r?Ss(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,it=(r,e)=>{for(var t in e||(e={}))Cs.call(e,t)&&rr(r,t,e[t]);if(tr)for(var t of tr(e))Os.call(e,t)&&rr(r,t,e[t]);return r},bs=(r=>(r.GAME="GAME",r.UI="UI",r))(bs||{});const We={config:it({},ws),textStyle:it({},Ps)},at="sceneCurrent";function Ct(r,e){return e!=null&&sr(r,e),We[r]}function sr(r,e){We[r]=e}function xs(r){return We[r]}function Es(r){delete We[r]}function Ot(r,e=at){if(r&&nr(r),r=Ct(e),r==null)throw console.log("PhaserSugarInternal",We),"useScene null error";return r}function So(){return xs(at)}function nr(r){sr(at,r)}function Ts(){Es(at)}function Co(r,e){nr(r);const t=e();return Ts(),t}function Oo(r){return Ot(r,"worldScene")}function bo(r){return Ot(r,"uiScene")}function xo(){const r=Ot();if(r==null)throw"useScene null error";return r.cameras.main}function Eo(r){return r=it(it({},We.textStyle),r),Ct("textStyle",r)}function To(r){return Ct("game",r)}var Ms=Object.defineProperty,or=Object.getOwnPropertySymbols,_s=Object.prototype.hasOwnProperty,Is=Object.prototype.propertyIsEnumerable,ir=(r,e,t)=>e in r?Ms(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,As=(r,e)=>{for(var t in e||(e={}))_s.call(e,t)&&ir(r,t,e[t]);if(or)for(var t of or(e))Is.call(e,t)&&ir(r,t,e[t]);return r};function Mo(r,e){const t=As({},e);if(e.fontSizePx&&(t.fontSize=`${e.fontSizePx}px`),e.wrapWidth&&(t.wordWrap={width:e.wrapWidth}),r.setStyle(t),e.lineHeight&&e.fontSizePx){const s=(e.lineHeight-1)*e.fontSizePx;r.setLineSpacing(s)}return r}var js=Object.defineProperty,ar=Object.getOwnPropertySymbols,Ds=Object.prototype.hasOwnProperty,Fs=Object.prototype.propertyIsEnumerable,lr=(r,e,t)=>e in r?js(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,cr=(r,e)=>{for(var t in e||(e={}))Ds.call(e,t)&&lr(r,t,e[t]);if(ar)for(var t of ar(e))Fs.call(e,t)&&lr(r,t,e[t]);return r};function Ve(r){return useScene().add.existing(r),r}function _o(r,e){const t=useScene(),s=useTextStyle(),n=new Phaser.GameObjects.Text(t,0,0,r,s);return e&&addNiceTextStyle(n,e),Ve(n)}function Io(r,e){const t=useScene();return Ve(new Phaser.GameObjects.Image(t,0,0,r,e))}function Ao(r,e){const t=useScene();return Ve(new Phaser.GameObjects.Sprite(t,0,0,r,e))}function jo(r,e,t,s){const n=useScene();return Ve(new Phaser.GameObjects.TileSprite(n,0,0,r,e,t,s))}function Do(r={}){const e=useScene(),t=cr({fillAlpha:1,fillColor:"#5aa867",height:128,width:64,strokeAlpha:1,strokeWidth:2},r),s=Ve(new Phaser.GameObjects.Rectangle(e,0,0,t.width,t.height,cssColorToInt(t.fillColor),t.fillAlpha));return t.strokeColor&&s.setStrokeStyle(t.strokeWidth,cssColorToInt(t.strokeColor),t.strokeAlpha),s}function Fo(r={}){const e=useScene(),t=cr({fillAlpha:1,fillColor:"#5aa867",radius:64,strokeAlpha:1,strokeWidth:2},r),s=Ve(new Phaser.GameObjects.Ellipse(e,0,0,t.radius*2,t.radius*2,cssColorToInt(t.fillColor),t.fillAlpha));return t.strokeColor&&s.setStrokeStyle(t.strokeWidth,cssColorToInt(t.strokeColor),t.strokeAlpha),s}function Ro(r){const e=getCurrentScene();return new Phaser.GameObjects.Container(e,0,0,r)}let Ae;function Pe(){if(Ae==null){const{width:r,height:e}=useCamera();return Ae=new Phaser.Geom.Rectangle(0,0,r,e),Ae}else return Ae}function Lo(r){Ae=r.getBounds()}function ko(r){Ae=r}let bt=new Phaser.Geom.Rectangle(0,0,0,0);function Go(r,e){bt.x=r,bt.y=e,Ae=bt}function Bo(r){r(),Ae=void 0}function No(r,e=0,t=0){const s=r.getBounds(),n=Pe(),i=n.x+(n.width-s.width)/2,l=n.y+(n.height-s.height)/2;return fe(r,i+e,l+t),r}function Ho(r,e=0){const t=r.getBounds(),s=Pe(),n=s.x+(s.width-t.width)/2,i=t.y;return fe(r,n+e,i),r}function Wo(r,e=0){const t=r.getBounds(),s=Pe(),n=t.x,i=s.y+(s.height-t.height)/2;return fe(r,n,i+e),r}function Vo(r,e=0){const t=r.getBounds(),s=Pe(),n=t.x,i=s.y+(s.height-t.height);return fe(r,n,i+e),r}function zo(r,e=0){const t=r.getBounds(),s=Pe(),n=t.x,i=s.y+s.height;return fe(r,n,i+e),r}function Xo(r,e=0){const t=r.getBounds(),s=Pe(),n=t.x,i=s.y;return fe(r,n,i+e),r}function Yo(r,e=0){const t=r.getBounds(),s=Pe(),n=t.x,i=s.y-t.height;return fe(r,n,i+e),r}function Uo(r,e=0){const t=r.getBounds(),s=Pe(),n=s.x+(s.width-t.width),i=t.y;return fe(r,n+e,i),r}function Ko(r,e=0){const t=r.getBounds(),s=Pe(),n=s.x+s.width,i=t.y;return fe(r,n+e,i),r}function $o(r,e=0){const t=r.getBounds(),n=Pe().x,i=t.y;return fe(r,n+e,i),r}function qo(r,e=0){const t=r.getBounds(),n=Pe().x-t.width,i=t.y;return fe(r,n+e,i),r}function fe(r,e,t){const s=r.getBounds(),n=e-s.left,i=t-s.top;return r.setPosition(r.x+n,r.y+i),r}function Jo(r,e){layout(()=>{useScene(r),center(e)})}function Zo(r,e){layout(()=>{useScene(r),center(e)}),r.add.existing(e)}var Rs=Object.defineProperty,Ls=Object.defineProperties,ks=Object.getOwnPropertyDescriptors,ur=Object.getOwnPropertySymbols,Gs=Object.prototype.hasOwnProperty,Bs=Object.prototype.propertyIsEnumerable,hr=(r,e,t)=>e in r?Rs(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ns=(r,e)=>{for(var t in e||(e={}))Gs.call(e,t)&&hr(r,t,e[t]);if(ur)for(var t of ur(e))Bs.call(e,t)&&hr(r,t,e[t]);return r},Hs=(r,e)=>Ls(r,ks(e));function Qo(r){const e=getWorldPosition(r),t=r.scene.cameras.main.getBounds();return Hs(Ns({},e),{x:e.x-t.x,y:e.y-t.y})}const dr={left:[ce.LEFT,ce.A],right:[ce.RIGHT,ce.D],up:[ce.UP,ce.W],down:[ce.DOWN,ce.S]};function ei({keys:r=dr,onLeft:e,onUp:t,onDown:s,onRight:n,onRelease:i,scene:l}){const{keyboard:u}=l.input;if(u==null){console.warn("input==null");return}u.addKeys(dr);const c={left:r.left.map(d=>u.addKey(d)),right:r.right.map(d=>u.addKey(d)),up:r.up.map(d=>u.addKey(d)),down:r.down.map(d=>u.addKey(d))};c.left.forEach(d=>{d.on("up",i),d.on("down",e)}),c.right.forEach(d=>{d.on("up",i),d.on("down",n)}),c.up.forEach(d=>{d.on("up",i),d.on("down",t)}),c.down.forEach(d=>{d.on("up",i),d.on("down",s)})}function Ws(r,e,t){const{scene:s}=r,n=r.scene.cameras.main,i=e,l=t,u=n.scrollX,c=n.scrollY;return s.input.dragDistanceThreshold=16,s.input.dragTimeThreshold=100,r.on(Phaser.Input.Events.GAMEOBJECT_DRAG,(d,y,w)=>{n.scrollX=Phaser.Math.Clamp(n.scrollX-y,0,i-n.width),n.scrollY=Phaser.Math.Clamp(n.scrollY-w,0,l-n.height)}),()=>{n.scrollX=u,n.scrollY=c}}var Vs=Object.defineProperty,fr=Object.getOwnPropertySymbols,zs=Object.prototype.hasOwnProperty,Xs=Object.prototype.propertyIsEnumerable,pr=(r,e,t)=>e in r?Vs(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,gr=(r,e)=>{for(var t in e||(e={}))zs.call(e,t)&&pr(r,t,e[t]);if(fr)for(var t of fr(e))Xs.call(e,t)&&pr(r,t,e[t]);return r};const Ys={isNotScrolling:!1,width:2400,height:1200,keys:vs,draggingMapMouseThreshold:{left:120,right:120,top:120,bottom:120},draggingMapVelocityMin:150,draggingMapVelocityMax:300};function ti(r){var e;const t=gr(gr({},Ys),r),{scene:s}=t,n=(e=t.camera)!=null?e:s.cameras.main;if(t.isNotScrolling)return()=>{};const i=n.getBounds();n.setBounds(0,0,t.width,t.height);let l=0,u=0;addWasdKeys({scene:s,keys:t.keys,onLeft:()=>l=-t.draggingMapVelocityMax,onRight:()=>l=t.draggingMapVelocityMax,onUp:()=>u=-t.draggingMapVelocityMax,onDown:()=>u=t.draggingMapVelocityMax,onRelease:()=>{l=0,u=0}});function c(){l=0,u=0}const d=(w,x)=>{l=w!=0?Math.sign(w)*t.draggingMapVelocityMin+w*t.draggingMapVelocityMax:0,u=x!=0?Math.sign(x)*t.draggingMapVelocityMin+x*t.draggingMapVelocityMax:0};s.input.on(Phaser.Input.Events.POINTER_MOVE,w=>{const x=mr(w.x,n.getBounds().left,n.width,t.draggingMapMouseThreshold.left,t.draggingMapMouseThreshold.right),B=mr(w.y,n.getBounds().top,n.height,t.draggingMapMouseThreshold.top,t.draggingMapMouseThreshold.bottom);d(x,B)}),onPause(s,c);const y=onUpdate(s,(w,x)=>{n.scrollY+=u*x/1e3,n.scrollX+=l*x/1e3});return()=>{y(),n.scrollY=0,n.scrollX=0,n.setBounds(i.x,i.y,i.width,i.height)}}function mr(r,e,t,s,n){const i=r-e,l=e+t-r;return i<=0||l<=0?0:i<=s?i/s-1:l<=n?1-l/n:0}var Us=(r,e,t)=>new Promise((s,n)=>{var i=c=>{try{u(t.next(c))}catch(d){n(d)}},l=c=>{try{u(t.throw(c))}catch(d){n(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(i,l);u((t=t.apply(r,e)).next())});class Ks{constructor(e){this.state=e,this.subscribers=new Set}getState(){return this.state}on(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}once(e){const t=s=>{e(s),this.subscribers.delete(t)};return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}await(){return Us(this,null,function*(){return new Promise(e=>this.once(e))})}setState(e){this.subscribers.forEach(t=>{t(e)}),this.state=e}emit(e){this.setState(e)}unSubScribeAll(){this.subscribers.clear()}}class ri extends Ks{constructor(e){super(e),this.state=e}getState(){return this.state}}class $s{constructor(e){this.props=e,this.elements=[],this.points=[]}draw(e){return e.map((s,n)=>{const i=e[n-1],l=e[n+1];return this.drawElement(s,i,l)})}clear(){this.elements.forEach(e=>e.destroy()),this.elements=[]}drawElement(e,t,s){const{scene:n,cellSize:i,pathColor:l="#007028"}=this.props,u=.25*i,c=new Phaser.GameObjects.Ellipse(n,e.x,e.y,u,u,se(l));return n.add.existing(c),this.elements.push(c),c}get pathPoints(){return this.points}get startPoint(){return this.points[0]}get targetPoint(){return this.points[this.points.length-1]}get hasPath(){return this.elements.length>0}}var qs=Object.defineProperty,Js=Object.defineProperties,Zs=Object.getOwnPropertyDescriptors,yr=Object.getOwnPropertySymbols,Qs=Object.prototype.hasOwnProperty,en=Object.prototype.propertyIsEnumerable,wr=(r,e,t)=>e in r?qs(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,tn=(r,e)=>{for(var t in e||(e={}))Qs.call(e,t)&&wr(r,t,e[t]);if(yr)for(var t of yr(e))en.call(e,t)&&wr(r,t,e[t]);return r},rn=(r,e)=>Js(r,Zs(e));const sn={cellMoveDurationMs:250};class nn{constructor(e){this.props=e,this.isMovingAnimation=!1,this.markersMap=new Map;const{scene:t,pathColor:s}=e;this.markersParent=new Phaser.GameObjects.Container(t),this.pathBuilder=new $s({scene:t,cellSize:64,pathColor:s}),this.pathCells=[],t.add.existing(this.markersParent)}get hasPath(){return!1}destroy(){var e;this.clearPath(),this.markersParent.destroy(),(e=this.workingTweenChain)==null||e.destroy()}clearPath(){this.markersParent.each(e=>{this.markersMap.clear(),this.markersParent.remove(e),e.destroy()})}drawPath(e,t){const{startCell:s,finishCell:n,props:i}=this,{cells2D:l}=i;if(s==null){console.warn("startCell==null");return}if(n==null){console.warn("finishCell==null");return}const u=(d,y)=>{var w,x;return((x=(w=l[d])==null?void 0:w[y])==null?void 0:x.isPathBlock)===!1},c=e!=null?e:u;this.pathCells=this.getPathCells(s,n,l,c),t&&this.pathCells.pop(),this.drawPathElements()}setStart(e){if(e.figures.length==0){console.warn("cell.figures.length==0");return}this.clearPath(),this.startCell=e}setFinish(e){this.finishCell=e}moveFigures(e){var t;const{startCell:s,finishCell:n}=this;if(s==null||n==null){console.warn("moveFigures:: startCell==null || finishCell==null");return}const i=(t=this.props.cellMoveDurationMs)!=null?t:sn.cellMoveDurationMs;this.isMovingAnimation=!0;const l=()=>{this.isMovingAnimation=!1,this.startCell=void 0,this.finishCell=void 0,e==null||e()},u=this.pathCells,c=s.figures.filter(w=>w.isMovableWhenSelected),d=c.map(w=>w.gameObject);let y=u[0];if(s===n||u.length===0||y==null){l();return}this.workingTweenChain=this.props.scene.tweens.chain({targets:d,onComplete:l,tweens:u.map(w=>({props:{x:w.gameObject.x,y:w.gameObject.y},duration:i,onComplete:()=>{this.eatMarker(w),c.forEach(x=>{y.removeFigure(x),w.placeFigure(x)}),y=w}}))})}getPathCells(e,t,s,n){return zt(rn(tn({},this.props),{isWalkable:n,from:e,to:t})).map(({column:l,row:u})=>{var c;return(c=s[l])==null?void 0:c[u]}).filter(l=>l!=null)}drawPathElements(){const e=this.pathCells.map(s=>{const{centerX:n,centerY:i}=s.gameObject.getBounds();return{x:n,y:i}});this.pathBuilder.draw(e).forEach((s,n)=>{const i=this.pathCells[n];if(i==null){console.warn("null cell");return}this.markersMap.set(i,s),this.markersParent.add(s)})}eatMarker(e){const t=this.markersMap.get(e);if(t==null){console.warn("markerObject==null for cell",e);return}this.markersParent.remove(t),t.destroy()}}const on=8,an="#4ce001",ln=6;class cn extends Phaser.GameObjects.Ellipse{constructor({scene:e,cellSize:t,selectorColor:s=an}){super(e,0,0,t,t),this.setStrokeStyle(on,se(s),1),this.setSmoothness(ln),this.gameObject=this,this.hide()}show(e){new He(e).center(this),this.setVisible(!0)}hide(){this.setVisible(!1)}}class un{constructor(e){this.props=e;const{scene:t,cellSize:s,selectorColor:n}=e;this.selector=new cn({scene:t,cellSize:s,selectorColor:n}),t.add.existing(this.selector)}getSelectedCell(){return this.selectedCell}hide(){this.selectedCell=void 0,this.selector.hide()}show(e){this.selectedCell=e,this.selector.show(this.selectedCell.gameObject)}switch(e){e===this.selectedCell?this.hide():this.show(e)}destroy(){this.selector.destroy(),this.selectedCell=void 0}}class hn{constructor(e){this.props=e,this.originalSize=128,this.isMovableWhenSelected=!0,this.type="player",this.combos={playerCombo:{playerCard:e.playerCard,treasureCards:e.treasureCards,monstersWin:[],diedByMonster:void 0}},this.gameObject=this.createObject(),this.restoreScale()}get playerCombo(){return this.combos.playerCombo}addTreasure(e){this.playerCombo.treasureCards.push(e)}addMonsterAfterFight(e,t){t?this.playerCombo.monstersWin.push(e):this.playerCombo.diedByMonster=e}createObject(){const{scene:e,cellSize:t}=this.props,s=new Phaser.GameObjects.Ellipse(e,0,0,this.originalSize,this.originalSize,se("#d109e0"));return s.setStrokeStyle(2,se("#00480a")),s}restoreScale(e=this.gameObject){const{cellSize:t}=this.props,{width:s,height:n}=e.getBounds(),i=Math.max(s,n),l=t/i*.75;e.setScale(l)}}class dn{constructor(e){this.props=e,this.originalSize=128,this.isMovableWhenSelected=!1,this.combos={treasureCombo:e.treasureCombo},this.gameObject=this.createObject(),this.restoreScale()}createObject(){const{scene:e}=this.props,t=new Phaser.GameObjects.Container(e),s=new Phaser.GameObjects.Ellipse(e,0,0,this.originalSize,this.originalSize,se("#989324"));s.setStrokeStyle(2,se("#00480a"));const n=new Phaser.GameObjects.Text(e,0,0,"$",{fontSize:"72px"});return new He(s).center(n),t.add([s,n]),t}restoreScale(){const{gameObject:e}=this,{cellSize:t}=this.props,{width:s,height:n}=e.getBounds(),i=Math.max(s,n),l=t/i*.75;e.setScale(l)}}class fn{constructor(e){this.props=e,this.originalSize=128,this.isMovableWhenSelected=!1,this.gameObject=this.createObject(),this.combos={monsterCombo:e.monsterCombo},this.restoreScale()}createObject(){const{scene:e}=this.props,t=new Phaser.GameObjects.Container(e),s=new Phaser.GameObjects.Ellipse(e,0,0,this.originalSize,this.originalSize,se("#7c0014"));s.setStrokeStyle(2,se("#00480a"));const n=new Phaser.GameObjects.Text(e,0,0,"M",{fontSize:"72px"});return new He(s).center(n),t.add(s),t.add(n),t}restoreScale(e=this.gameObject){const{cellSize:t}=this.props,{width:s,height:n}=e.getBounds(),i=Math.max(s,n),l=t/i*.75;e.setScale(l)}}class pn{constructor(e){this.props=e}generateCells(){const{columns:e,rows:t,terrainType:s="grass"}=this.props,n=v(e,t,(i,l)=>({terrainType:s}));return console.log("terrainCells",n),n}}class si{constructor(e){this.props=e}run(){const{columns:e,rows:t,terrainRules:s,treasureCards:n,monsterCards:i,openedMonsterProbability:l,openedTreasuresProbability:u,playerCard:c,hexOrSquare:d="hex"}=this.props,w=new FirstTerrainGenerator({columns:e,rows:t,terrainRules:s}).generateCells(),x=makeArray2D(e,t,(z,U)=>({terrainType:w[U][z].terrainType})),B=[];B.push({column:0,row:0,playerCombo:{playerCard:c,treasureCards:[],monstersWin:[]}});for(let z=0;z<Math.min(3,t);z++)for(let U=0;U<Math.min(3,e);U++)x[z][U].terrainType="grass";const ne=shuffleArray(i),_e=shuffleArray(n),Ee=ne.map(z=>{const U={monsterCard:z,treasureCards:[],isOpened:Math.random()<l},me=_e.pop();return me?U.treasureCards.push(me):console.warn("no treasure for monster"),U}),oe=_e.map(z=>({treasureCards:[z],isOpened:Math.random()<u})),ve=getTerrainRulesMap(s);console.log("terrainRuleMap",ve);const ze=(z,U)=>{if(!isSafeArr2Place(z,U,e,t))return!1;const me=x[z][U],Ie=ve[me.terrainType],Fe=Ie.speedK>0;return console.log("isWalkable",Ie.type,Ie.speedK,Fe),!!Fe},je=d==="hex"?getHexNears:getEightNearsColumnRows,De=4,Be=4;e:for(let z=2;z<e;z+=De)for(let U=2;U<t;U+=Be){if(Ee.length==0&&oe.length==0)break e;let me=z,Ie=U;for(;!ze(me,Ie);){const lt=je(me,Ie).filter(({column:Se,row:It})=>isSafeArr2Place(Se,It,e,t)),ct=getRandomArrayElement(lt);me=ct.column,Ie=ct.row}const Fe={column:me,row:Ie};Ee.length>0&&Math.random()-.5?Fe.monsterCombo=Ee.pop():Fe.treasureCombo=oe.pop(),B.push(Fe)}return{startCells:x,startCombos:B}}}class gn{constructor(e){this.props=e;const{columns:t,rows:s}=this.props;this.grid=v(t,s,(n,i)=>({terrainType:"grass"})),this.terrainGenerator=new pn({columns:t,rows:s})}run(){const{columns:e,rows:t,positions:s,treasureCards:n,monsterCards:i,gamePlay:l,playerCard:u}=this.props,{openedTreasuresProbability:c,openedMonsterProbability:d,treasuresTotal:y,monstersTotal:w}=l,x=et(Ke(i),w),B=et(Ke(n),y);console.log("monsterCardsInGame",x.length),console.log("columns",e);const ne=this.terrainGenerator.generateCells();ge(ne,(z,U,me)=>{this.grid[U][me].terrainType=z.terrainType});const _e=s.player.column,Ee=s.player.row;this.grid[_e][Ee].playerCombo={playerCard:u,treasureCards:[],monstersWin:[]},this.setGrassAroundPlayer({column:_e,row:Ee,radius:2,terrainType:"ground"});const ve=3,ze=3,je=1;let De=0,Be=0;for(let z=0;z<e;z+=ve)for(let U=1;U<t;U+=ze){if(!Lt({columns:e,rows:t,row:U,column:z,includeCenter:!0,cellRadius:je}).map(Se=>this.isPlaceFree(Se.column,Se.row)&&this.isTerrainCardPlaceable(Se.column,Se.row)).reduce((Se,It)=>Se&&It,!0))continue;const Fe=De<x.length,_t=Be<B.length,lt=_t&&Fe&&Math.random()-.5>0,ct=_t&&!lt;if(lt){const Se=x[De];console.log(`place monster ${Se.title} at ${z} ${U}`),this.grid[z][U].monsterCombo={monsterCard:Se,treasureCards:[B[Be]],isOpened:d>Math.random()},De++,Be++;continue}if(ct){this.grid[z][U].treasureCombo={treasureCards:[B[Be]],isOpened:c>Math.random()},Be++;continue}}return this.grid}isSafeColumnRow(e,t){return e>=0&&e<this.props.columns&&t>=0&&t<this.props.rows}isPlaceFree(e,t){if(!this.isSafeColumnRow(e,t))return!1;const{monsterCombo:s,treasureCombo:n,playerCombo:i}=this.grid[e][t];return s==null&&n==null&&i==null}isTerrainCardPlaceable(e,t){if(!this.isSafeColumnRow(e,t))return!1;const{terrainType:s}=this.grid[e][t];return["ground","grass","forest","sand"].find(i=>i===s)!=null}getFreeStartPlaces(e,t){const{columns:s,rows:n}=this.props,i=[],l=2;let u=l,c=l;for(let d=0;d<t;d++){const y=e[u][c]}return i.push({column:2,row:2}),i.push({column:4,row:4}),i}placeMonstersTreasures(e){const{places:t,cards:s}=e,{monsters:n,treasures:i}=s;let l=0,u=0;return t.forEach(c=>{const d=Math.random()-.5>0,y=!d;if(d){c.monsterCombo={monsterCard:n[l],treasureCards:[i[u]]},l++,u++;return}if(y){c.treasureCombo={treasureCards:[i[u]]},u++;return}}),t}setGrassAroundPlayer(e){const{grid:t}=this,{columns:s,rows:n}=this.props,{column:i,row:l,terrainType:u,radius:c}=e;Lt({column:i,row:l,cellRadius:c,rows:n,columns:s,includeCenter:!0}).forEach(({column:y,row:w})=>{t[y][w].terrainType=u})}}function mn(r){const e={};return r.figures.forEach(t=>{if(t.combos.playerCombo){e.playerFigure=t;return}if(t.combos.monsterCombo){e.monsterFigure=t;return}if(t.combos.treasureCombo){e.treasureFigure=t;return}}),e}const yn=new Set(["mountain","water"]),xt=r=>yn.has(r.terrainRule.type),Pr=r=>r.figures.length>0,ni=r=>r.figures.length===1,oi=r=>r.figures.length>1;function wn(r){return xt(r)||Pr(r)}class vr extends Phaser.GameObjects.Ellipse{constructor(e){var t,s;super(e.scene,0,0,e.cellSize,e.cellSize,se(e.color)),this.props=e,this.figureSet=new Set;const{column:n,color:i,row:l}=e,u=(t=e.strokeCssColor)!=null?t:"#2a2f2a",c=(s=e.strokeWidth)!=null?s:2;this.setStrokeStyle(c,se(u)),this.setSmoothness(6),this.column=n,this.row=l,this.metaData={cssColor:i},this.gameObject=this}get isPathBlock(){return wn(this)}get terrainRule(){return this.props.terrainRule}placeFigure(e){this.figureSet.add(e);const{centerX:t,centerY:s}=this.gameObject.getBounds();e.gameObject.setPosition(t,s)}removeFigure(e){this.figureSet.delete(e)}get figures(){return Array.from(this.figureSet)}set figures(e){this.figureSet=new Set(e)}}class Pn{constructor(e){this.props=e}getColumnRow(e,t){const{cellSize:s}=this.props;return{column:Y(e,s),row:ie(e,t,s)}}getCenterXY(e,t){const{cellSize:s}=this.props,n=j(s),i=V(s),u=e%2===1?i/2:0,c=e*n,d=u+t*i;return{x:c+s/2,y:d+i/2}}getNears(e,t,s=1){return Rt(e,t,s)}getPath(e){return zt(e)}}class ii{constructor(e){this.props=e}getColumnRow(e,t){const{cellSize:s}=this.props,n=s;return{column:getColumn(e,s),row:getRow(t,n)}}getCenterXY(e,t){const{cellSize:s}=this.props;return{x:e*s+s/2,y:t*s+s/2}}getNears(e,t,s){return getNearsColumnRows(e,t,s)}getPath(e){return getSquareGridXYPath(e)}}class ai extends Phaser.GameObjects.Rectangle{constructor({scene:e,column:t,color:s,row:n,cellSize:i,isPathBlock:l}){super(e,0,0,i,i,se(s)),this.figureSet=new Set,this.setStrokeStyle(2,se("#5f675f")),this.column=t,this.row=n,this.metaData={cssColor:s},this.gameObject=this,this.isPathBlock=l}placeFigure(e){this.figureSet.add(e);const{centerX:t,centerY:s}=this.gameObject.getBounds();e.gameObject.setPosition(t,s)}removeFigure(e){this.figureSet.delete(e)}get figures(){return Array.from(this.figureSet)}set figures(e){this.figureSet=new Set(e)}}class vn extends Phaser.GameObjects.Ellipse{constructor({scene:e,column:t,color:s,row:n,cellSize:i,isPathBlock:l}){super(e,0,0,i,i,se(s)),this.figureSet=new Set,this.setStrokeStyle(2,se("#5f675f")),this.setSmoothness(6),this.column=t,this.row=n,this.isPathBlock=l,this.metaData={cssColor:s},this.gameObject=this}placeFigure(e){this.figureSet.add(e);const{centerX:t,centerY:s}=this.gameObject.getBounds();e.gameObject.setPosition(t,s)}removeFigure(e){this.figureSet.delete(e)}get figures(){return Array.from(this.figureSet)}set figures(e){this.figureSet=new Set(e)}}var Sr=Math.pow;const Sn=Phaser.Input.Events.GAMEOBJECT_POINTER_UP,Cn=500;class On{constructor(e){this.props=e,this.destroyables=[],this.isInputDragging=!1,this.gridStrategy=new Pn({cellSize:e.cellSize}),this.inputRect=this.createInputRect(),this.cells=this.createCells(),this.bindEvents(),this.destroyables=[this.inputRect],ge(this.cells,t=>{t&&this.destroyables.push(t)})}getCell(e,t){var s;return(s=this.cells[e])==null?void 0:s[t]}get columnsAmount(){return this.props.columns}get rowsAmount(){return this.props.rows}get cellSize(){return this.props.cellSize}get cells2D(){return this.cells}destroy(){var e;this.destroyables.forEach(t=>t.destroy()),this.destroyables=[],(e=this.resetCamera)==null||e.call(this)}getCellCenterXY(e){return{x:e.gameObject.x,y:e.gameObject.y}}getCellByXY(e,t){const s=this.gridStrategy.getColumnRow(e,t),n=this.getCell(s.column,s.row),l=de(s.column,s.row).map(({column:y,row:w})=>this.getCell(y,w)),u=[n,...l];let c=n,d=1/0;return u.forEach(y=>{if(y==null)return;const{centerY:w,centerX:x}=y.gameObject.getBounds(),B=Sr(x-e,2)+Sr(w-t,2);B<d&&(d=B,c=y)}),c}createInputRect(){const{scene:e,columns:t,rows:s,cellSize:n}=this.props,i=t*n,l=s*n,u=new Phaser.GameObjects.Rectangle(e,0,0,i,l).setOrigin(0);return fe(u,0,0),e.add.existing(u),u}createCells(){const{props:e,gridStrategy:t}=this,{scene:s,columns:n,rows:i,cellSize:l}=e;return v(n,i,(c,d)=>{const y=this.createCell(c,d,l),w=t.getCenterXY(c,d);return fe(y.gameObject,w.x-l/2,w.y-l/2),s.add.existing(y.gameObject),y})}createCell(e,t,s){const{scene:n}=this.props,i=mt(["#b47c00","#4d725c","#fff6d6","#8c8cb6","#dedede","#af0000"]),l=i==="#af0000";return new vn({scene:n,column:e,row:t,cellSize:s,isPathBlock:l,color:i})}bindEvents(){this.inputRect.setInteractive({useHandCursor:!0,draggable:!0}),this.bindClick(),this.bindDraggingCamera(),this.bindDisableClicksWhenDragging()}bindClick(){this.inputRect.on(Sn,(e,t)=>{const{worldX:s,worldY:n}=e;if(this.isInputDragging)return;const i=this.getCellByXY(s,n);if(i==null){console.warn("critical error: cell undefined!"),console.warn(`x ${s} y ${n}`);return}else this.props.onClick(i)})}bindDraggingCamera(){const e=this.inputRect,{width:t,height:s}=e.getBounds();this.resetCamera=Ws(e,t,s)}bindDisableClicksWhenDragging(){this.inputRect.on(Phaser.Input.Events.GAMEOBJECT_DRAG_START,()=>{this.isInputDragging=!0}),this.inputRect.on(Phaser.Input.Events.GAMEOBJECT_DRAG_END,()=>{this.inputRect.scene.time.addEvent({delay:Cn,callback:()=>{this.isInputDragging=!1}})})}}class bn extends On{constructor(e){super(e),this.props=e}createCell(e,t,s){const{scene:n,terrainRulesMap:i,terrains:l,terrainColors:u}=this.props;if(l[e][t]){const{terrainType:c}=l[e][t],d=i[c],y=u[c];return new vr({scene:n,column:e,row:t,cellSize:s,color:y,terrainRule:d})}else{console.warn("UNDEFINED CELL in terrains",e,t);const c="grass",d=i[c],y=u[c];return new vr({scene:n,column:e,row:t,cellSize:s,color:y,terrainRule:d})}}}function li(r){return Object.values(r)}function xn(r){return r.reduce((e,t)=>(e[t.type]=t,e),{})}function ci(r){const e={player:[],monster:[],treasure:[]};return r.forEach(t=>{e[t.type].push(t)}),e}class Cr{constructor(e){this.props=e,this.originalSize=128,this.isMovableWhenSelected=!1;const{monsterCombo:t,treasureCombo:s}=e;this.combos={},t?this.combos.monsterCombo=t:this.combos.treasureCombo=s,this.gameObject=this.createObject(),this.restoreScale()}createObject(){const{scene:e}=this.props,t=new Phaser.GameObjects.Container(e),s=new Phaser.GameObjects.Ellipse(e,0,0,this.originalSize,this.originalSize,se("#2e282f")),n=new Phaser.GameObjects.Text(e,0,0,"?",{fontSize:"72px"});return new He(s).center(n),t.add([s,n]),t}restoreScale(e=this.gameObject){const{cellSize:t}=this.props,{width:s,height:n}=e.getBounds(),i=Math.max(s,n),l=t/i*.75;e.setScale(l)}}const Or={finishMapPortal:{isOpened:!1,column:0,row:0,price:1/0},treasures:{},monsters:{},player:{column:0,row:0,health:3,playerCard:{type:"player",id:-1,title:"Daniel Default",description:"Default Hero",quote:"Nobody know my, everybody uses",attack:1,health:3},inventory:[],statistics:{monsters:{killed:[],killedByMonster:void 0},treasures:{grabbed:[]}}},cells:[]},En=r=>Object.values(r.treasures),ui=r=>Object.values(r.monsters),br=r=>r.player.inventory.length,hi=r=>{const e=br(r),t=En(r).length,s=r.finishMapPortal.price;return e===t?3:e>=s+(t-s)/2?2:e===s?1:0},Tn=r=>{const e=br(r),t=r.finishMapPortal.price;return e>=t},xr=(r,e)=>{const t=e.treasures[r.id];if(t==null){console.warn("no state for card",r);return}const s=e.player;t.isCollected=!0,s.inventory.push(r),s.statistics.treasures.grabbed.push(r)},Er=r=>r.player.inventory.reduce((e,t)=>t.bonuses.attack!=null?e+t.bonuses.attack:0,0),di=r=>r.player.inventory.reduce((e,t)=>t.bonuses.health!=null?e+t.bonuses.health:0,0),Tr=(r,e)=>{const t=e.monsters[r.id];return t==null?(console.warn("no state for card",r),!1):Er(e)>t.card.attack},Mn=(r,e)=>{const t=e.monsters[r.id];if(t==null){console.warn("no state for card",r);return}const s=e.player;t.isAlive=!1,s.statistics.monsters.killed.push(r),t.treasures.forEach(n=>xr(n,e))},_n=(r,e)=>{if(e.monsters[r.id]==null){console.warn("no state for card",r);return}e.player.health--},In=r=>r.player.health<=0;var An=Object.defineProperty,jn=Object.defineProperties,Dn=Object.getOwnPropertyDescriptors,Mr=Object.getOwnPropertySymbols,Fn=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,_r=(r,e,t)=>e in r?An(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ln=(r,e)=>{for(var t in e||(e={}))Fn.call(e,t)&&_r(r,t,e[t]);if(Mr)for(var t of Mr(e))Rn.call(e,t)&&_r(r,t,e[t]);return r},kn=(r,e)=>jn(r,Dn(e));const Gn=r=>{const{playerCard:e,positions:t}=r,s={},n={},i=new gn(r).run();ge(i,(u,c,d)=>{const{treasureCombo:y,monsterCombo:w}=u;y&&y.treasureCards.forEach(x=>{s[x.id]={card:x,column:c,row:d,isCollected:!1,isOpened:y.isOpened===!0}}),w&&(n[w.monsterCard.id]={card:w.monsterCard,treasures:w.treasureCards,column:c,row:d,isOpened:w.isOpened===!0,isAlive:!0})});const l={player:kn(Ln({},Or.player),{playerCard:e,column:t.player.column,row:t.player.row}),treasures:s,monsters:n,cells:i,finishMapPortal:Or.finishMapPortal};return er(l)};var Bn=Object.defineProperty,Ir=Object.getOwnPropertySymbols,Nn=Object.prototype.hasOwnProperty,Hn=Object.prototype.propertyIsEnumerable,Ar=(r,e,t)=>e in r?Bn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Wn=(r,e)=>{for(var t in e||(e={}))Nn.call(e,t)&&Ar(r,t,e[t]);if(Ir)for(var t of Ir(e))Hn.call(e,t)&&Ar(r,t,e[t]);return r},jr=(r,e,t)=>new Promise((s,n)=>{var i=c=>{try{u(t.next(c))}catch(d){n(d)}},l=c=>{try{u(t.throw(c))}catch(d){n(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(i,l);u((t=t.apply(r,e)).next())});class Vn{constructor(e){this.props=e,this.config=er(gt);const{treasureCards:t,monsterCards:s,playerCard:n,cellSize:i,columns:l,rows:u,positions:c}=this.config;this.gameState=Gn(this.config),this.terrainRulesMap=xn(this.config.terrainRules),console.log(`Start of ${Ge.text("game.name")} game!`),console.log("cardsOfTreasures",t.length),console.log("cardsOfMonsters",s.length);const{scene:d}=this.props;this.grid=new bn({scene:d,columns:l,rows:u,cellSize:i,onClick:w=>this.onCellClick(w),terrains:this.gameState.cells,terrainRulesMap:this.terrainRulesMap,terrainColors:this.config.terrainColors}),this.pathMaker=new nn({scene:d,cellMoveDurationMs:75,pathColor:this.config.path.pathColor,cells2D:this.grid.cells2D,columnMax:this.grid.columnsAmount-1,rowMax:this.grid.rowsAmount-1});const y=this.addFigures(this.gameState.cells);console.log("cardFigures",y.length),console.log("cardFigures",y),console.log("cardFigures monsters",y.filter(w=>w.combos.monsterCombo).length),console.log("cardFigures treasures",y.filter(w=>w.combos.treasureCombo).length),this.figures=[...y],this.selector=new un({scene:d,cellSize:i,selectorColor:this.config.selector.selectorColor}),this.initLogic()}destroy(){this.grid.destroy(),this.figures.forEach(e=>e.gameObject.destroy()),this.selector.destroy(),this.pathMaker.destroy()}initLogic(){this.setPlayerCellAsRouteStart()}addFigures(e){const t=[],{scene:s}=this.props;return ge(e,(n,i,l)=>{if(n.playerCombo==null&&n.treasureCombo==null&&n.monsterCombo==null)return;const{playerCombo:u,monsterCombo:c,treasureCombo:d}=n,y=this.createFigureForCombo(u,c,d);if(y==null)return;const w=this.grid.getCell(i,l);w!=null&&(w.placeFigure(y),s.add.existing(y.gameObject),t.push(y))}),t}onCellClick(e){if(this.selector.switch(e),this.pathMaker.isMovingAnimation){console.warn("input blocked by pathMaker isMoveAnimation");return}const{figures:t}=e;this.buildPathOrGo(e);const{player:s,monster:n,treasure:i,isVoid:l}=zn(t);if(l){this.onVoidCellClick(e);return}if(s){const[u,c]=s;this.onPlayerClick(e,u,c);return}if(n){const[u,c]=n;this.onMonsterClick(e,u,c);return}if(i){const[u,c]=i;this.onTreasureClick(e,u,c);return}}onPlayerClick(e,t,s){this.pathMaker.setStart(e),console.log("onPlayerClick",e,s,t)}onVoidCellClick(e){const{terrainRule:t}=e,{type:s,speedK:n}=t;this.showCardInfo({title:`${s}`,description:`\u041F\u0440\u043E\u0441\u0442\u043E \u043F\u0443\u0441\u0442\u043E\u0439 \u043A\u0443\u0441\u043E\u043A \u043F\u0440\u043E\u0441\u0442\u0440\u0430\u043D\u0441\u0442\u0432\u0430, \u0437\u0430\u043F\u043E\u043B\u0435\u043D\u043D\u044B\u0439 ${s}`}),this.showPlayerCard()}onMonsterClick(e,t,s){const{isOpened:n,monsterCard:i}=s;if(n){const l=Tr(i,this.gameState)?"\u0412\u044B \u0441\u0438\u043B\u044C\u043D\u0435\u0435 \u043C\u043E\u043D\u0441\u0442\u0440\u0430":"\u041C\u043E\u043D\u0441\u0442\u0440 \u0441\u0438\u043B\u044C\u043D\u0435\u0435 \u0432\u0430\u0441";this.showCardInfo({title:`\u041C\u043E\u043D\u0441\u0442\u0440 ${i.title}`,description:`\u0410\u0442\u0430\u043A\u0430 ${i.attack} - ${l}`})}else this.showDungeonInfo();this.showPlayerCard()}onTreasureClick(e,t,s){var n,i;const{isOpened:l,treasureCards:u}=s;console.log("onTreasureClick",e,s,t);const c=u[0];l?this.showCardInfo({title:`\u0421\u043E\u043A\u0440\u043E\u0432\u0438\u0449\u0435 ${c.title}`,description:`\u0411\u043E\u043D\u0443\u0441 \u043A \u0430\u0442\u0430\u043A\u0435 ${(n=c.bonuses.attack)!=null?n:0}, \u0431\u043E\u043D\u0443\u0441 \u043A \u0437\u0434\u043E\u0440\u043E\u0432\u044C\u044E ${(i=c.bonuses.health)!=null?i:0}`}):this.showDungeonInfo(),this.showPlayerCard()}buildPathOrGo(e){console.log("buildPathOrGo ",e);const t=this.pathMaker.startCell,s=this.pathMaker.finishCell,n=!xt(e);if(t&&n){console.log("run draw path");const i=e,l=mn(i).monsterFigure!=null,u=(c,d)=>{const y=this.grid.getCell(c,d);if(y==null)return!1;const w=y===i,x=xt(y),B=Pr(y);return!x&&(w||!B)};this.pathMaker.setFinish(i),this.pathMaker.clearPath(),this.pathMaker.drawPath(u,l)}if(t&&s&&e===s){console.log("run move animation!");const i=s.figures[0],l=()=>{if(console.log("move complete in game"),this.gameState.player.column=s.column,this.gameState.player.row=s.row,this.setPlayerCellAsRouteStart(),i){const{monsterCombo:u,treasureCombo:c}=i.combos;u&&this.onMonsterFight(u),c&&this.onTreasureGrab(c,i).catch(console.warn)}};this.pathMaker.moveFigures(l);return}}createFigureForCombo(e,t,s){const{scene:n}=this.props,{cellSize:i}=this.config;if(e){const{playerCard:l,treasureCards:u}=e;return new hn({scene:n,cellSize:i,playerCard:l,treasureCards:u})}if(t)return t.isOpened?new fn({scene:n,cellSize:i,monsterCombo:t}):new Cr({scene:n,cellSize:i,monsterCombo:t});if(s)return s.isOpened?new dn({scene:n,cellSize:i,treasureCombo:s}):new Cr({scene:n,cellSize:i,treasureCombo:s})}onMonsterFight(e){const{monsterCard:t}=e,{gameState:s}=this;console.log("TO DO FIGHT WITH ",e.monsterCard.title),Tr(t,s)?(Mn(t,s),console.log("You win!")):(_n(t,s),console.log("You loose!"),In(s)&&console.log("GAME OVER - YOU ARE DEAD"))}onTreasureGrab(e,t){return jr(this,null,function*(){var s;console.log("TO DO grab TREASURE WITH ",e.treasureCards);const{treasureCards:n}=e,{gameState:i}=this;n.forEach(l=>xr(l,i)),yield this.showTreasureGrabAnimation(n),console.log("TO DO  \u041A\u0410\u041A \u0421\u0418\u041D\u0425\u0420\u041E\u041D\u0418\u0417\u0418\u0420\u041E\u0412\u0410\u0422\u042C \u0421\u041E\u0421\u0422\u041E\u042F\u041D\u0418\u0415?"),console.log("TO DO  1. \u0434\u043E\u0431\u044B\u0432\u0430\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u043E \u0444\u0438\u0433\u0443\u0440\u0430\u0445 \u0438\u0437 gameState \u0447\u0435\u0440\u0435\u0437 column, row"),console.log("TO DO  1.1 \u0443\u0431\u0440\u0430\u0442\u044C \u0438\u043D\u0444\u0443 \u043E \u0444\u0438\u0433\u0443\u0440\u0430\u0445 \u0438\u0437 cell"),(s=t.gameObject)==null||s.destroy(),this.showPlayerCard(),Tn(i)&&console.log("TO DO - OPEN END MAP PORTAL")})}setPlayerCellAsRouteStart(){const{column:e,row:t}=this.gameState.player,s=this.grid.getCell(e,t);this.pathMaker.setStart(s)}showDungeonInfo(){this.showCardInfo({title:"\u041F\u043E\u0434\u0437\u0435\u043C\u0435\u043B\u044C\u0435",description:"\u0412 \u043D\u0435\u043C \u0442\u043E\u0447\u043D\u043E \u0435\u0441\u0442\u044C \u0441\u043E\u043A\u0440\u043E\u0432\u0438\u0449\u0430 \u0438 \u043C\u043E\u0433\u0443\u0442 \u043F\u0440\u044F\u0442\u0430\u0442\u044C\u0441\u044F \u043C\u043E\u043D\u0441\u0442\u0440\u044B"})}showCellInfo(e){const{row:t,column:s,terrainRule:n,figures:i}=e;console.log("cell terrain ",n.type,Wn({},n)),console.log("cell figures",i),console.log("click on cell",s,t,e)}showPlayerCard(){const{playerCard:e,health:t,inventory:s}=this.gameState.player,n=Er(this.gameState);this.showCardInfo({title:`\u0412\u044B ${e.title}`,description:`\u0417\u0434\u043E\u0440\u043E\u0432\u044C\u0435 ${t}, \u0410\u0442\u0430\u043A\u0430 ${n} `})}showCardInfo({title:e,description:t,imageKey:s,quote:n}){console.log("================"),console.log(e),console.log(t),n&&console.log(n),console.log("================")}showTreasureGrabAnimation(e){return jr(this,null,function*(){console.log("You collect treasures ",...e)})}}function zn(r){let e,t,s,n=!0;return r.forEach(i=>{const{playerCombo:l,monsterCombo:u,treasureCombo:c}=i.combos;if(l){e=[i,l],n=!1;return}if(u){t=[i,u],n=!1;return}if(c){s=[i,c],n=!1;return}}),{player:e,monster:t,treasure:s,isVoid:n}}var Xn=(r,e,t)=>new Promise((s,n)=>{var i=c=>{try{u(t.next(c))}catch(d){n(d)}},l=c=>{try{u(t.throw(c))}catch(d){n(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(i,l);u((t=t.apply(r,e)).next())});const Yn={title:"Treasures And Monsters",run:r=>Xn(void 0,null,function*(){const e=new Vn({scene:r});return console.log("TreasuresAndMonsters created"),()=>{e.destroy(),console.log("TreasuresAndMonsters destroyed")}})},Un=Array.from(new Set([O("Simple Games"),Yn,O("Test Components"),$,D]));class Et extends Phaser.Scene{constructor(){super(Et.name)}preload(){this.load.image("sky","./assets/images/space3.png"),this.load.image("logo","./assets/images/phaser3-logo.png"),this.load.image("red","./assets/images/red.png")}create(){this.add.image(400,300,"sky");const e=this.add.particles(0,0,"red",{speed:100,scale:{start:1,end:0},blendMode:"ADD"}),t=this.physics.add.image(400,100,"logo");t.setVelocity(100,200),t.setBounce(1,1),t.setCollideWorldBounds(!0),e.startFollow(t),console.log("Game started")}}const Kn={mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,parent:"game",width:960,height:640},Dr={width:800,height:600,physics:{default:"arcade",arcade:{gravity:{x:0,y:200}}},type:Phaser.AUTO,backgroundColor:"#4488aa",transparent:!0,scale:Kn,scene:[Et]};var $n=Object.defineProperty,qn=Object.defineProperties,Jn=Object.getOwnPropertyDescriptors,Fr=Object.getOwnPropertySymbols,Zn=Object.prototype.hasOwnProperty,Qn=Object.prototype.propertyIsEnumerable,Rr=(r,e,t)=>e in r?$n(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Lr=(r,e)=>{for(var t in e||(e={}))Zn.call(e,t)&&Rr(r,t,e[t]);if(Fr)for(var t of Fr(e))Qn.call(e,t)&&Rr(r,t,e[t]);return r},kr=(r,e)=>qn(r,Jn(e)),eo=(r,e,t)=>new Promise((s,n)=>{var i=c=>{try{u(t.next(c))}catch(d){n(d)}},l=c=>{try{u(t.throw(c))}catch(d){n(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(i,l);u((t=t.apply(r,e)).next())});const to=kr(Lr({},Dr),{scale:kr(Lr({},Dr.scale),{mode:Phaser.Scale.NONE,autoCenter:Phaser.Scale.NONE}),scene:[new k(k.name)]}),Gr=new Phaser.Game(to),Tt=document.getElementById("stories");if(Tt==null)throw"no sidebar";const ro=document.getElementById("gameTitle");let Mt;const Br=(r,e)=>eo(void 0,null,function*(){Mt==null||Mt(),ro.innerHTML=r.title;const t=e.scene.getScene(k.name);Mt=yield r.run(t)});let Nr=0;Un.forEach(r=>{r.run!=null?(so(r,Tt,Nr==0),Nr++):r.template==="titleDelimiter"&&no(r,Tt)});function so(r,e,t){const s=Hr({storyTag:"button",innerHtml:`${r.title}`,className:"story",parent:e});s.addEventListener("click",()=>Br(r,Gr).catch(console.warn)),t&&setTimeout(()=>{s.focus(),Br(r,Gr).catch(console.warn)},500)}function no(r,e){return Hr({storyTag:"div",innerHtml:`${r.title}`,className:"storyDelimiter",parent:e})}function Hr({storyTag:r,className:e,innerHtml:t,parent:s}){const n=document.createElement(r);return n.innerHTML=t,n.classList.add(e),s.append(n),n}})()})();})();

//# sourceMappingURL=bundle.5b1c41d72777d94e3493.js.map